<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Cell封面图片 on BIO-SPRING</title>
    <link>bio-spring/tags/cell%E5%B0%81%E9%9D%A2%E5%9B%BE%E7%89%87/</link>
    <description>Recent content in Cell封面图片 on BIO-SPRING</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Wed, 08 Dec 2010 00:00:00 +0000</lastBuildDate>
    <atom:link href="bio-spring/tags/cell%E5%B0%81%E9%9D%A2%E5%9B%BE%E7%89%87/" rel="self" type="application/rss+xml" />

    
      <item>
        <title>Perl LWP：从“国家地理每日图片”到“Cell最近一期的封面”</title>
        <link>bio-spring/post/2010/12/08/2010-12-08-perl-lwp-image-fetch/</link>
        <pubDate>Wed, 08 Dec 2010 00:00:00 +0000</pubDate>
        <author>gaoch</author>
        <guid>bio-spring/post/2010/12/08/2010-12-08-perl-lwp-image-fetch/</guid>
        <description>
          &lt;p&gt;在网上看到了一个从国家地理杂志网站下载每日图片的Perl程序。因为网站改版，脚本已经不能正常运行，经过修改后，经测试可以将每日图片下载到当前目录，代码如下：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-lang:perl&#34;&gt;#!/usr/bin/perl
# author:
# Seraphxby
# Purpose:
# 查看国家地理每日图片的Perl脚本
# history:
# v0.1 first draft
# 2010-12-8 modified by gaospecial
use warnings;
use strict;
use LWP::Simple;
my $url=&#39;http://photography.nationalgeographic.com/photography/photo-of-the-day&#39;;
my $content = get( &amp;quot;$url&amp;quot; ) || die &amp;quot;get the page failed!\n&amp;quot;;
my $img;
if ($content =~ m/(.*?&amp;lt;\/a&amp;gt;)/s) {
$content = $1;
if($content =~ m/&amp;lt;img.*?src=&amp;quot;([^\t]*?)&amp;quot;/){ # 非贪婪的数量词 *?,匹配中不含有跳格\t
$img = $1;
if($img =~ m/^(.*?)([^\/]+$)/){
$url = $1;
$img = $2;
getstore($url.$img,$img) || die &amp;quot;get img failed!\n&amp;quot;;

}
}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;然后，为了能够下载Cell的封面，将脚本中的相应参数修改后，类似的，可以从cell网站下载封面图片到当前目录。代码如下：&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-lang:perl&#34;&gt;#!/usr/bin/perl
# author:
# gaospecial@gmail.com 2010-12
# Purpose:
# 获取最近一期Cell杂志封面的Perl脚本

use warnings;
use strict;
use LWP::Simple;
my $url=&#39;http://www.cell.com/current&#39;;
my $content = get( &amp;quot;$url&amp;quot; ) || die &amp;quot;get the page failed!\n&amp;quot;;
my $img;
if ($content =~ m/(.*?&amp;lt;\/div&amp;gt;)/s) {
$content = $1;
if($content =~ m/&amp;lt;img.*?src=&amp;quot;([^\t]*?)&amp;quot;.*&amp;lt;p.*&amp;gt;(.*)&amp;lt;\/p&amp;gt;/){ # get url and cation
my $img_src = $1;
my $img_cation = $2;
if($img_src =~ m/^.*?([^\/]+$)/){ # get image name
my $img_name = $1;
getstore($img_src,$img_name) || die &amp;quot;get img failed!\n&amp;quot;; # save image to current dir
}
}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; &lt;/p&gt;
&lt;div class=&#34;primary_photo&#34;&gt;
&lt;div id=&#34;coverpopup&#34;&gt;
&lt;p&gt;此处的两部分代码，可以作为Perl LWP模块的入门范例。&lt;/p&gt;
&lt;p&gt;Posted from &lt;a href=&#34;http://sourceforge.net/projects/gscribble/&#34;&gt;GScribble&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

        </description>
      </item>
    
  </channel>
</rss>
