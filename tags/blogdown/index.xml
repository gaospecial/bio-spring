<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Blogdown on BIO-SPRING</title>
    <link>bio-spring/tags/blogdown/</link>
    <description>Recent content in Blogdown on BIO-SPRING</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Tue, 26 Nov 2024 00:00:00 +0000</lastBuildDate>
    <atom:link href="bio-spring/tags/blogdown/" rel="self" type="application/rss+xml" />

    
      <item>
        <title>使用 AI 优化 blogdown 的分类和标签</title>
        <link>bio-spring/post/2024/11/26/ai-rename-blogdown-tags/</link>
        <pubDate>Tue, 26 Nov 2024 00:00:00 +0000</pubDate>
        <author>gaoch</author>
        <guid>bio-spring/post/2024/11/26/ai-rename-blogdown-tags/</guid>
        <description>
          &lt;p&gt;要遍历 &lt;code&gt;blogdown&lt;/code&gt; 站点下的每个文章，并对 &lt;code&gt;categories&lt;/code&gt; 和 &lt;code&gt;tags&lt;/code&gt; 进行合并和优化，可以按照以下步骤操作：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;读取文章文件&lt;/strong&gt;：遍历站点目录，找到所有的文章（通常是 &lt;code&gt;.Rmd&lt;/code&gt; 或 &lt;code&gt;.md&lt;/code&gt; 文件），读取文件中的元数据（如 &lt;code&gt;categories&lt;/code&gt; 和 &lt;code&gt;tags&lt;/code&gt;）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;合并和优化元数据&lt;/strong&gt;：对每篇文章的 &lt;code&gt;categories&lt;/code&gt; 和 &lt;code&gt;tags&lt;/code&gt; 进行合并，移除重复项，并根据需要进行优化（例如，合并相似的类别或标签）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;更新文章元数据&lt;/strong&gt;：将优化后的 &lt;code&gt;categories&lt;/code&gt; 和 &lt;code&gt;tags&lt;/code&gt; 写回文章的元数据。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;获取全部-tags&#34;&gt;获取全部 tags&lt;/h2&gt;
&lt;p&gt;下面是一个示例 R 代码，可以帮助实现这个过程：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(blogdown)
library(yaml)

# 设置博客目录路径
site_dir &amp;lt;- &amp;quot;/Users/gaoch/GitHub/bio-spring&amp;quot;

# 获取所有文章文件
posts &amp;lt;- list.files(file.path(site_dir, &amp;quot;content&amp;quot;, &amp;quot;post&amp;quot;), 
                    pattern = &amp;quot;\\.md$|\\.Rmd$&amp;quot;, 
                    recursive = TRUE,
                    full.names = TRUE)

# 获取 tags 的函数
get_tags = function(post) {
  # 读取文章的元数据
  post_yaml &amp;lt;- blogdown:::split_yaml_body(xfun::read_utf8(post))[[&#39;yaml_list&#39;]]
  
  # 合并 categories 和 tags
  categories &amp;lt;- post_yaml$categories
  tags &amp;lt;- post_yaml$tags
  
  # 合并 categories 和 tags 并去除重复项
  tags &amp;lt;- unique(c(categories, tags))

  return(tags)
}

# 遍历每篇文章
all_tags = lapply(posts, get_tags) |&amp;gt; unlist() |&amp;gt; unique()

# 输出完成信息
head(all_tags)
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;使用-chatgpt-处理和优化-tags&#34;&gt;使用 ChatGPT 处理和优化 tags&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;下面我将提供给你 200 多个标签，请分析它们之间的含义，把重复的标签合并成一个标签。给每一个标签分配一个分类（生物学，信息技术，其它中的一个）。以csv 格式返回原标签，合并后的标签，分类。

旧文, 百度空间, 研究, 软件分享, 科学研究, WordPress博客, Software, 信息技术 INFORMATICS, 操作系统 LINUX, XML-RPC, 言论 VOICE, 转载, 生物学 BIOLOGY, 生物软件 BIO-SOFTWARE, Bio-Rad, iQ5, Opticon Monitor, 伯乐, Matrix, Vector, 向量, 矩阵, 生物信息 BIOINFORMATICS, GFF, GFF3, BioPerl, Ubuntu, GScribble, gtkhtml2, Python, 博客客户端, BioPerl BIOPERL, 原创教程 TUTORIAL, primer, primer design, primer3, RT-PCR, bash, imagemagick, resize, 压缩图片, 压缩照片, 脚本, 时事 NEWS, 上海, 火灾, Cell封面图片, LWP, perl, rename, script, shell, 重命名, perldoc, blog, 转载 SHARE, 教育, 研究生, 实验方法 METHODS, 结核, 药物, 矩阵实验室 MATLAB, MATLAB, 作图, 折线图, 数据处理, 柱状图, 标准差, 误差线, grep, linux, vi, win7, windows7, 移动硬盘写保护, 移动硬盘只读, 移动硬盘故障, 数据挖掘 DATA MINING, 宋词, 数据挖掘, 团队, NCBI, SwissProt, firefox, zotero, 文献管理, movie, 电影, cygwin, unxutils, virtualBox, Windows, 虚拟机, china, map, 地图, 自然科学 NATURE &amp;amp; SCIENCE, 仪器, 实验室设备, 知识, 紫外灯, BioEdit, TreeView, 进化树, mount, 分区, 挂载, 硬盘, 磁盘, 错误, andriod, diskusage, RidNacs, 工具, 读后感, 张亭栋, 砒霜, 柚子茶, NOD32, 套接字, XP, 隐私, fedora, putty, puttygen, ssh, wordpress, mo, po, poEdit, theme, 主题, 汉化, Flash, SP3, system32, 声音, 故障, 没有声音, 系统文件, DOI, 正则表达式, sqlite, 网站建设 WEBSITE, post, SAM, bowtie, dna sequences, gedit, seq, fastq, formats, sra, 格式, apache, mysql, 随笔 NOTE, Tree, Time, Seneca, Lucilius, Death, Nature, Poverty, R Markdown, plot, regression, 自己 SPRING, 事故, 消防, 生命, NGS, SSPACE, 云计算 CLOUD+, RDS, 云数据库, 阿里云, apache2, OSS, 自做自受 DIY, camera, f60fd, fujifilm, repair, 数码, 相机, 研究进展 PROGRESS, InbR, publication, biobliography, PubMed, SCI, GenBank, GTF, BED, assemble, contig, ContigExpress, NTI, alignment, MEGA, Phylogeny, 多序列比对, ecology, mothur, QIIME, Reading, Thinker, Wealth, MetaPhlAn, PowerPoint, biom, Microbiome, STAMP, author, csl, journal, style, year, RNA-seq, rsem, Origin, aliyun, ecs, Win10, 系统清理, ggplot2, R, Aspera, FTP, 测序, Windows10, Lens, Office, blogdown, statistics, microbial ecology, PCA, PCoA, NMDS, RStudio, git, enrichplot, WordPress, PHP, ggrepel, directlabel, ht-seq, hisat2, ClusterProfiler, tibble, data.frame, Letter, Example, Friendship, Trust, anova, github, proxy, Zotero, Hugo, Chocolatey, ggraph, sf, DT, igraph, ggVennDiagram, renv, ggplot, hugo, 学习笔记, Julia, 科学计算, 数据结构, Makefile, MacOS, PicGo, 图床, dplyr, tidyverse, 算法, Posit, Shiny, AI, 人工智能, 计算机技术, GitHub, Webhook, Apache, COS, NAS, 机器学习
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;它返回的结果如下：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;csv = &#39;旧标签,合并后的标签,分类
ChatGPT,ChatGPT,信息技术
旧文,旧文,其它
研究,科学研究,生物学
软件分享,软件分享,信息技术
科学研究,科学研究,生物学
WordPress博客,WordPress,信息技术
Software,软件分享,信息技术
信息技术 INFORMATICS,信息技术,信息技术
操作系统 LINUX,Linux,信息技术
XML-RPC,XML-RPC,信息技术
言论 VOICE,言论,其它
转载,转载,其它
生物学 BIOLOGY,生物学,生物学
生物软件 BIO-SOFTWARE,生物软件,生物学
Bio-Rad,Bio-Rad,生物学
iQ5,iQ5,生物学
Opticon Monitor,Opticon Monitor,生物学
伯乐,伯乐,生物学
Matrix,矩阵,生物学
Vector,向量,生物学
向量,向量,生物学
矩阵,矩阵,生物学
生物信息 BIOINFORMATICS,生物信息,生物学
GFF,GFF,生物学
GFF3,GFF3,生物学
BioPerl,BioPerl,生物学
Ubuntu,Ubuntu,信息技术
GScribble,GScribble,信息技术
gtkhtml2,gtkhtml2,信息技术
Python,Python,信息技术
博客客户端,博客客户端,信息技术
BioPerl BIOPERL,BioPerl,生物学
原创教程 TUTORIAL,原创教程,其它
primer,primer design,生物学
primer design,primer design,生物学
primer3,primer design,生物学
RT-PCR,RT-PCR,生物学
bash,bash,信息技术
imagemagick,imagemagick,信息技术
resize,压缩图片,信息技术
压缩图片,压缩图片,信息技术
压缩照片,压缩图片,信息技术
脚本,脚本,信息技术
时事 NEWS,时事,其它
上海,上海,其它
火灾,火灾,其它
Cell封面图片,Cell封面图片,生物学
LWP,LWP,信息技术
perl,perl,信息技术
rename,重命名,信息技术
script,脚本,信息技术
shell,shell,信息技术
重命名,重命名,信息技术
perldoc,perldoc,信息技术
blog,WordPress,信息技术
转载 SHARE,转载,其它
教育,教育,其它
研究生,研究生,其它
实验方法 METHODS,实验方法,生物学
结核,结核,生物学
药物,药物,生物学
矩阵实验室 MATLAB,MATLAB,信息技术
MATLAB,MATLAB,信息技术
作图,作图,信息技术
折线图,作图,信息技术
数据处理,数据处理,信息技术
柱状图,作图,信息技术
标准差,作图,信息技术
误差线,作图,信息技术
grep,grep,信息技术
linux,Linux,信息技术
vi,vi,信息技术
win7,Windows,信息技术
windows7,Windows,信息技术
移动硬盘写保护,移动硬盘故障,信息技术
移动硬盘只读,移动硬盘故障,信息技术
移动硬盘故障,移动硬盘故障,信息技术
数据挖掘 DATA MINING,数据挖掘,信息技术
宋词,宋词,其它
数据挖掘,数据挖掘,信息技术
团队,团队,其它
NCBI,NCBI,生物学
SwissProt,SwissProt,生物学
firefox,firefox,信息技术
zotero,Zotero,信息技术
文献管理,Zotero,信息技术
movie,电影,其它
电影,电影,其它
cygwin,cygwin,信息技术
unxutils,unxutils,信息技术
virtualBox,虚拟机,信息技术
Windows,Windows,信息技术
虚拟机,虚拟机,信息技术
china,地图,其它
map,地图,其它
地图,地图,其它
自然科学 NATURE &amp;amp; SCIENCE,自然科学,生物学
仪器,实验室设备,生物学
实验室设备,实验室设备,生物学
知识,知识,其它
紫外灯,紫外灯,生物学
BioEdit,BioEdit,生物学
TreeView,TreeView,生物学
进化树,进化树,生物学
mount,挂载,信息技术
分区,挂载,信息技术
挂载,挂载,信息技术
硬盘,硬盘,信息技术
磁盘,硬盘,信息技术
错误,错误,信息技术
andriod,Android,信息技术
diskusage,diskusage,信息技术
RidNacs,RidNacs,信息技术
工具,工具,信息技术
读后感,读后感,其它
张亭栋,张亭栋,其它
砒霜,砒霜,其它
柚子茶,柚子茶,其它
NOD32,NOD32,信息技术
套接字,套接字,信息技术
XP,Windows,信息技术
隐私,隐私,其它
fedora,Fedora,信息技术
putty,putty,信息技术
puttygen,putty,信息技术
ssh,ssh,信息技术
wordpress,WordPress,信息技术
mo,mo,信息技术
po,po,信息技术
poEdit,poEdit,信息技术
theme,主题,信息技术
主题,主题,信息技术
汉化,汉化,信息技术
Flash,Flash,信息技术
SP3,SP3,信息技术
system32,system32,信息技术
声音,声音,其它
故障,故障,信息技术
没有声音,声音,其它
系统文件,系统文件,信息技术
DOI,DOI,信息技术
正则表达式,正则表达式,信息技术
sqlite,sqlite,信息技术
网站建设 WEBSITE,网站建设,信息技术
post,post,信息技术
SAM,SAM,生物学
bowtie,bowtie,生物学
dna sequences,dna sequences,生物学
gedit,gedit,信息技术
seq,seq,生物学
fastq,fastq,生物学
formats,formats,信息技术
sra,sra,生物学
格式,格式,信息技术
apache,Apache,信息技术
mysql,mysql,信息技术
随笔 NOTE,随笔,其它
Tree,Tree,其它
Time,Time,其它
Seneca,Seneca,其它
Lucilius,Lucilius,其它
Death,Death,其它
Nature,Nature,其它
Poverty,Poverty,其它
R Markdown,R Markdown,信息技术
plot,作图,信息技术
regression,regression,信息技术
自己 SPRING,自己,其它
事故,事故,其它
消防,消防,其它
生命,生命,其它
NGS,NGS,生物学
SSPACE,SSPACE,生物学
云计算 CLOUD+,云计算,信息技术
RDS,RDS,信息技术
云数据库,云数据库,信息技术
阿里云,阿里云,信息技术
apache2,Apache,信息技术
OSS,OSS,信息技术
自做自受 DIY,自做自受,其它
camera,相机,其它
f60fd,f60fd,其它
fujifilm,fujifilm,其它
repair,repair,其它
数码,数码,其它
相机,相机,其它
研究进展 PROGRESS,研究进展,生物学
InbR,InbR,生物学
publication,publication,生物学
biobliography,biobliography,生物学
PubMed,PubMed,生物学
SCI,SCI,生物学
GenBank,GenBank,生物学
GTF,GTF,生物学
BED,BED,生物学
assemble,assemble,生物学
contig,contig,生物学
ContigExpress,ContigExpress,生物学
NTI,NTI,生物学
alignment,alignment,生物学
MEGA,MEGA,生物学
Phylogeny,Phylogeny,生物学
多序列比对,多序列比对,生物学
ecology,ecology,生物学
mothur,mothur,生物学
QIIME,QIIME,生物学
Reading,Reading,其它
Thinker,Thinker,其它
Wealth,Wealth,其它
MetaPhlAn,MetaPhlAn,生物学
PowerPoint,PowerPoint,信息技术
biom,biom,生物学
Microbiome,Microbiome,生物学
STAMP,STAMP,生物学
author,author,其它
csl,csl,信息技术
journal,journal,生物学
style,style,信息技术
year,year,其它
RNA-seq,RNA-seq,生物学
rsem,rsem,生物学
Origin,Origin,信息技术
aliyun,阿里云,信息技术
ecs,ecs,信息技术
Win10,Windows,信息技术
系统清理,系统清理,信息技术
ggplot2,ggplot2,信息技术
R,R,信息技术
Aspera,Aspera,信息技术
FTP,FTP,信息技术
测序,测序,生物学
Windows10,Windows,信息技术
Lens,Lens,信息技术
Office,Office,信息技术
blogdown,blogdown,信息技术
statistics,statistics,信息技术
microbial ecology,microbial ecology,生物学
PCA,PCA,信息技术
PCoA,PCoA,信息技术
NMDS,NMDS,信息技术
RStudio,RStudio,信息技术
git,git,信息技术
enrichplot,enrichplot,信息技术
WordPress,WordPress,信息技术
PHP,PHP,信息技术
ggrepel,ggrepel,信息技术
directlabel,directlabel,信息技术
ht-seq,ht-seq,生物学
hisat2,hisat2,生物学
ClusterProfiler,ClusterProfiler,信息技术
tibble,tibble,信息技术
data.frame,data.frame,信息技术
Letter,Letter,其它
Example,Example,其它
Friendship,Friendship,其它
Trust,Trust,其它
anova,anova,信息技术
github,GitHub,信息技术
proxy,proxy,信息技术
Zotero,Zotero,信息技术
Hugo,Hugo,信息技术
Chocolatey,Chocolatey,信息技术
ggraph,ggraph,信息技术
sf,sf,信息技术
DT,DT,信息技术
igraph,igraph,信息技术
ggVennDiagram,ggVennDiagram,信息技术
renv,renv,信息技术
ggplot,ggplot2,信息技术
hugo,Hugo,信息技术
学习笔记,学习笔记,其它
Julia,Julia,信息技术
科学计算,科学计算,信息技术
数据结构,数据结构,信息技术
Makefile,Makefile,信息技术
MacOS,MacOS,信息技术
PicGo,PicGo,信息技术
图床,图床,信息技术
dplyr,dplyr,信息技术
tidyverse,tidyverse,信息技术
算法,算法,信息技术
Posit,Posit,信息技术
Shiny,Shiny,信息技术
AI,人工智能,信息技术
人工智能,人工智能,信息技术
计算机技术,信息技术,信息技术
GitHub,GitHub,信息技术
Webhook,Webhook,信息技术
Apache,Apache,信息技术
COS,COS,信息技术
NAS,NAS,信息技术
机器学习,机器学习,信息技术&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;修改文章中的标签&#34;&gt;修改文章中的标签&lt;/h2&gt;
&lt;p&gt;读取上面的结果，并据此对文章进行修改。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;all_tags = read.csv(text = csv)
tag2tag = all_tags$合并后的标签
tag2category = all_tags$分类
names(tag2tag) &amp;lt;- names(tag2category) &amp;lt;- all_tags$旧标签

for (file in posts){
  header = blogdown:::split_yaml_body(xfun::read_utf8(file))[[&#39;yaml_list&#39;]]
  header$file = file
  
  # 获取原有的 tags
  tags = unlist(header[c(&amp;quot;categories&amp;quot;,&amp;quot;tags&amp;quot;)]) |&amp;gt; unique() |&amp;gt; na.omit()
  
  # 处理 category
  header$categories &amp;lt;- tag2category[tags] |&amp;gt; unique() |&amp;gt; na.omit()
  header$tags &amp;lt;- tag2tag[tags] |&amp;gt; unique() |&amp;gt; na.omit()
  
  # 更新文件
  do.call(blogdown:::modify_yaml, header)
}
&lt;/code&gt;&lt;/pre&gt;

        </description>
      </item>
    
      <item>
        <title>部署网站到 gh-pages</title>
        <link>bio-spring/post/2023/12/24/blogdown-site-to-gh-pages/</link>
        <pubDate>Sun, 24 Dec 2023 00:00:00 +0000</pubDate>
        <author>gaoch</author>
        <guid>bio-spring/post/2023/12/24/blogdown-site-to-gh-pages/</guid>
        <description>
          &lt;h2 id=&#34;relurl-的用法&#34;&gt;relURL 的用法&lt;/h2&gt;
&lt;p&gt;参见：&lt;a href=&#34;https://gohugo.io/functions/urls/relurl/#input-begins-with-a-slash&#34;&gt;https://gohugo.io/functions/urls/relurl/#input-begins-with-a-slash&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在将 &lt;code&gt;blogdown&lt;/code&gt; 创建的静态网站部署到 GitHub Pages 时，确保在 &lt;code&gt;config.toml&lt;/code&gt; 或 &lt;code&gt;config.yaml&lt;/code&gt; 文件中设置了正确的 &lt;code&gt;baseURL&lt;/code&gt;。这是指向你的 GitHub Pages 网站的基本 URL。&lt;/p&gt;
&lt;p&gt;在配置文件中添加如下行：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;baseURL = &amp;quot;https://&amp;lt;username&amp;gt;.github.io/&amp;lt;repository-name&amp;gt;/&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;确保将 &lt;code&gt;&amp;lt;username&amp;gt;&lt;/code&gt; 替换为你的 GitHub 用户名，&lt;code&gt;&amp;lt;repository-name&amp;gt;&lt;/code&gt; 替换为你的仓库名称。&lt;/p&gt;
&lt;p&gt;另外，请确保 &lt;code&gt;publishDir&lt;/code&gt;（默认是 &lt;code&gt;public&lt;/code&gt; 文件夹）的内容正确地推送到 &lt;code&gt;gh-pages&lt;/code&gt; 分支。你可以使用如下命令将内容推送到 &lt;code&gt;gh-pages&lt;/code&gt;：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;git subtree push --prefix public origin gh-pages
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这个命令会将 &lt;code&gt;public&lt;/code&gt; 文件夹的内容推送到 &lt;code&gt;gh-pages&lt;/code&gt; 分支。确保在推送之前已经生成了静态网站，可以通过以下命令：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;blogdown::build_site()
&lt;/code&gt;&lt;/pre&gt;

        </description>
      </item>
    
      <item>
        <title>Edit link is wrong in Hugo Prose</title>
        <link>bio-spring/post/2023/08/20/edit-link-is-wrong-in-hugo-prose/</link>
        <pubDate>Sun, 20 Aug 2023 00:00:00 +0000</pubDate>
        <author>gaoch</author>
        <guid>bio-spring/post/2023/08/20/edit-link-is-wrong-in-hugo-prose/</guid>
        <description>
          &lt;p&gt;Hugo-Prose 主题中使用 &lt;code&gt;correction.html&lt;/code&gt; 生成在 GitHub 进行修改的链接。&lt;/p&gt;
&lt;p&gt;在 &lt;code&gt;correction.html&lt;/code&gt; 中主要针对 R Markdown 文件存在的情况，找出对应的 &lt;code&gt;*.Rmd&lt;/code&gt; 和 &lt;code&gt;*.Rmarkdown&lt;/code&gt; 的路径。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;{{ if (and .File .Site.Params.editLink) }}
&amp;lt;div&amp;gt;
  &amp;lt;div class=&amp;quot;side side-left&amp;quot;&amp;gt;&amp;lt;h3&amp;gt;{{ i18n &amp;quot;suggestChanges&amp;quot; }}&amp;lt;/h3&amp;gt;&amp;lt;/div&amp;gt;
  {{ $filePath := .File.Path }}
  {{ $RmdFile := (print .File.Dir .File.BaseFileName &amp;quot;.Rmd&amp;quot;) }}
  {{ if (fileExists (print &amp;quot;content/&amp;quot; $RmdFile)) }}
    {{ $filePath = $RmdFile }}
  {{ else }}
    {{ $RmdFile = (print .File.Dir .File.BaseFileName &amp;quot;.Rmarkdown&amp;quot;) }}
    {{ if (fileExists (print &amp;quot;content/&amp;quot; $RmdFile)) }}
      {{ $filePath = $RmdFile }}
    {{ end }}
  {{ end }}
  {{ i18n &amp;quot;suggestChangesText1&amp;quot; }}&amp;lt;a href=&amp;quot;{{ .Site.Params.editLink }}{{ $filePath }}&amp;quot; id=&amp;quot;edit-link&amp;quot;&amp;gt;{{ i18n &amp;quot;suggestChangesText2&amp;quot; }}&amp;lt;/a&amp;gt;
&amp;lt;/div&amp;gt;
{{ end }}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;在这个文件中，使用 Hugo 变量 &lt;code&gt;.File.Path&lt;/code&gt; 访问当前文件的路径。&lt;/p&gt;
&lt;p&gt;通过查阅参考资料，发现 &lt;code&gt;.File.Path&lt;/code&gt; 变量储存的文件路径中，其分隔符是跟随系统的。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The path separators (slash or backslash) in .File.Path, .File.Dir, and .File.Filename depend on the operating system.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;See also&lt;/strong&gt;: &lt;a href=&#34;https://gohugo.io/variables/files/&#34;&gt;https://gohugo.io/variables/files/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;如果在 Linux 系统中使用 &lt;code&gt;blogdown::build_site()&lt;/code&gt; 生成的网站，则修改链接是正确的。&lt;/p&gt;
&lt;p&gt;然而，当网站在 Windows 系统上生成时，因为 &lt;code&gt;.File.Path&lt;/code&gt; 的路径是以 &lt;code&gt;\&lt;/code&gt; 为分割的，所以这个链接中的分隔符是错误的，从而导致无法在 GitHub 访问到正确的路径，出现 404 错误&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;
&lt;p&gt;为此，需要对 &lt;code&gt;correction.html&lt;/code&gt; 模板进行修改。这里使用 &lt;code&gt;path.Clean&lt;/code&gt; 函数&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;将路径转变为 Linux 格式路径。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;  {{ $filePath := path.Clean .File.Path }}
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;On a Windows system, if &lt;code&gt;.File.Path&lt;/code&gt; is &lt;code&gt;foo\bar.md&lt;/code&gt;, then:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;{{ path.Clean .File.Path }} → &amp;quot;foo/bar.md&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;See also&lt;/strong&gt;: &lt;a href=&#34;https://gohugo.io/functions/path.clean/&#34;&gt;https://gohugo.io/functions/path.clean/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这样的话，通过 GitHub 修改的功能就更加鲁棒了。&lt;/p&gt;
&lt;p&gt;这个修改已经 &lt;a href=&#34;https://github.com/yihui/hugo-prose/pull/46&#34;&gt;合并到Hugo-prose&lt;/a&gt; 源了。&lt;/p&gt;
&lt;div class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;
&lt;p&gt;虽然路径是在 Windows 系统中生成的，但是 GitHub 服务器却是 Linux 系统，文件路径总是以 &amp;ldquo;/&amp;rdquo; 为分隔符的。&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:2&#34;&gt;
&lt;p&gt;&lt;code&gt;path.Clean&lt;/code&gt; replaces path separators with slashes (&lt;code&gt;/&lt;/code&gt;) and removes extraneous separators, including trailing separators.&amp;#160;&lt;a href=&#34;#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;

        </description>
      </item>
    
      <item>
        <title>更改 blogdown 主题</title>
        <link>bio-spring/post/2023/08/20/modifying-blogdown-hugo-theme/</link>
        <pubDate>Sun, 20 Aug 2023 00:00:00 +0000</pubDate>
        <author>Chun-Hui Gao</author>
        <guid>bio-spring/post/2023/08/20/modifying-blogdown-hugo-theme/</guid>
        <description>
          &lt;p&gt;Hugo Prose 主题中，网站主页的元素是通过 &lt;code&gt;/themes/hugo-prose/layouts/_default/list.html&lt;/code&gt; 生成的。&lt;/p&gt;
&lt;p&gt;有几个地方想改一下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;显示卡片时，标题统一放在左边。原来左一下右一下看起来有点多余。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;显示 blog post 时，以一句话标题显示，不使用小卡片的形式。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;调整卡片标题的位置&#34;&gt;调整卡片标题的位置&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;{{ if .IsHome }}
{{ range $i, $p := (where .Site.RegularPages &amp;quot;Section&amp;quot; &amp;quot;card&amp;quot;) }}
&amp;lt;section class=&amp;quot;article-list&amp;quot;{{ with .Params.style }}{{ printf &amp;quot; style=%q&amp;quot; . | safeHTMLAttr }}{{ end }}&amp;gt;
  &amp;lt;table&amp;gt;
&amp;lt;tbody&amp;gt;
&amp;lt;tr&amp;gt;
{{if (eq (mod $i 2) 0) }}
&amp;lt;td class=&amp;quot;side-title&amp;quot;&amp;gt;&amp;lt;h1&amp;gt;{{ $p.Title }}&amp;lt;/h1&amp;gt;&amp;lt;/td&amp;gt;
&amp;lt;td class=&amp;quot;spacer spacer-left&amp;quot;&amp;gt;&amp;lt;/td&amp;gt;
&amp;lt;td&amp;gt;{{ $p.Content }}&amp;lt;/td&amp;gt;
{{ else }}
&amp;lt;td&amp;gt;{{ $p.Content }}&amp;lt;/td&amp;gt;
&amp;lt;td class=&amp;quot;spacer spacer-right&amp;quot;&amp;gt;&amp;lt;/td&amp;gt;
&amp;lt;td class=&amp;quot;side-title&amp;quot;&amp;gt;&amp;lt;h1&amp;gt;{{ $p.Title }}&amp;lt;/h1&amp;gt;&amp;lt;/td&amp;gt;
{{ end }}
&amp;lt;/tr&amp;gt;
&amp;lt;/tbody&amp;gt;
&amp;lt;/table&amp;gt;
&amp;lt;/section&amp;gt;
{{ end }}
{{ end }}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;{{ range $i, $p := (where .Site.RegularPages &amp;quot;Section&amp;quot; &amp;quot;card&amp;quot;) }}&lt;/code&gt; 表示在全部页面中搜索，&lt;code&gt;section = card&lt;/code&gt; 的页面。这里的 &lt;code&gt;section&lt;/code&gt; 指的是 &lt;code&gt;content&lt;/code&gt; 目录下面的子文件夹，即 &lt;code&gt;content/card/&lt;/code&gt; 目录。这个命令的作用就是把这里的文件序号赋值给 &lt;code&gt;$i&lt;/code&gt;，把内容对象赋值给 &lt;code&gt;$p&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;接下来，根据编号 &lt;code&gt;$i&lt;/code&gt; 是否是偶数，分别设置不同的 CSS 类（&lt;code&gt;.side-title&lt;/code&gt;，&lt;code&gt;spacer-left&lt;/code&gt;，等等），只需要稍作改动即可使达到目的。&lt;/p&gt;
&lt;h3 id=&#34;html-模板&#34;&gt;HTML 模板&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;{{ if .IsHome }}
{{ range $i, $p := (where .Site.RegularPages &amp;quot;Section&amp;quot; &amp;quot;card&amp;quot;) }}
&amp;lt;section class=&amp;quot;article-list&amp;quot;{{ with .Params.style }}{{ printf &amp;quot; style=%q&amp;quot; . | safeHTMLAttr }}{{ end }}&amp;gt;
  &amp;lt;table&amp;gt;
&amp;lt;tbody&amp;gt;
&amp;lt;tr&amp;gt;
&amp;lt;td class=&amp;quot;side-title&amp;quot;&amp;gt;&amp;lt;h1&amp;gt;{{ $p.Title }}&amp;lt;/h1&amp;gt;&amp;lt;/td&amp;gt;
&amp;lt;td class=&amp;quot;spacer spacer-left&amp;quot;&amp;gt;&amp;lt;/td&amp;gt;
&amp;lt;td&amp;gt;{{ $p.Content }}&amp;lt;/td&amp;gt;
&amp;lt;/tr&amp;gt;
&amp;lt;/tbody&amp;gt;
&amp;lt;/table&amp;gt;
&amp;lt;/section&amp;gt;
{{ end }}
{{ end }}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;值得一提的是，&lt;code&gt;&amp;lt;section class=&amp;quot;article-list&amp;quot;{{ with .Params.style }}{{ printf &amp;quot; style=%q&amp;quot; . | safeHTMLAttr }}{{ end }}&amp;gt;&lt;/code&gt; 将从页面的 YAML 头文件中读取额外的 CSS 定义，并将其应用到 &lt;code&gt;card&lt;/code&gt; 中去。下面的 YAML 头文件将使对应页面的背景色与众不同。而其中的 &lt;code&gt;weight&lt;/code&gt; 将在排列元素间的先后顺序时用到。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;title: PROJECTS
style: &#39;background: #f7f9fb;&#39;
weight: 2
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;css-设置&#34;&gt;CSS 设置&lt;/h3&gt;
&lt;p&gt;观察一下效果，发现页面中标题的朝向仍然有问题。这是因为 CSS 定义的缘故。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-css&#34;&gt;.article-list .side-title { transform: rotate(90deg); }
.article-list:nth-child(even):not(.post-card) .side-title { transform: rotate(-90deg); }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;它会将表格 &lt;code&gt;.article-list&lt;/code&gt; 偶数行的标题 &lt;code&gt;.side-title&lt;/code&gt; 逆时针旋转 90 度，而不是默认的顺时针旋转 90 度。因此，将第 2 行删掉即可。&lt;/p&gt;
&lt;h2 id=&#34;调整-post-的显示样式&#34;&gt;调整 Post 的显示样式&lt;/h2&gt;
&lt;p&gt;在卡片下面，包含了其它的一些内容，这里显示的内容是由依据下面的设置筛选得到的。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;{{ $pages := .Pages }}
{{ if .IsHome }}
{{ $pages = first (default 6 .Site.Params.homePosts) (sort (where .Site.RegularPages &amp;quot;Type&amp;quot; &amp;quot;in&amp;quot; .Site.Params.mainSections) &amp;quot;Date&amp;quot; &amp;quot;desc&amp;quot;) }}
{{ else }}
{{ $pages = (.Paginate $pages).Pages }}
{{ end }}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;首先，获取全部的页面并将其保存在 &lt;code&gt;$pages&lt;/code&gt; 变量中。然后通过读取 &lt;code&gt;.Site.Params.homeposts&lt;/code&gt; 变量和 &lt;code&gt;.Site.Params.mainSections&lt;/code&gt; 变量，对按照时间降序排列的页面中选取几个。这些变量都保存在 &lt;code&gt;config.yaml&lt;/code&gt; 文件中。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;params:
  homePosts: 6
  mainSections: [&amp;quot;post&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果是主页的话，那么仅获取默认 6 个 Posts，并将其保存在 &lt;code&gt;$pages&lt;/code&gt; 变量中；如果不是的话，则将其进行分页处理。这里仅考虑是主页的情况。&lt;/p&gt;
&lt;p&gt;文章列表在一个表格中显示。表格没有表头元素（&lt;code&gt;&amp;lt;th&amp;gt;&amp;lt;/th&amp;gt;&lt;/code&gt;），只有行元素（&lt;code&gt;&amp;lt;tr&amp;gt;&amp;lt;/tr&amp;gt;&lt;/code&gt;）和列元素（&lt;code&gt;&amp;lt;td&amp;gt;&amp;lt;/td&amp;gt;&lt;/code&gt;）。每行有 3 列。第一列是内容，第二列是分隔符，第三列是 Section Name。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;{{ range $pages }}
  &amp;lt;section class=&amp;quot;article-list post-card{{ if .Draft }} draft {{ end }}&amp;quot;&amp;gt;
    &amp;lt;table&amp;gt;
  &amp;lt;tbody&amp;gt;
  &amp;lt;tr&amp;gt;
  &amp;lt;td&amp;gt;
  {{ with .Params.categories }}
  {{ range first 1 . }}
  &amp;lt;div class=&amp;quot;categories&amp;quot;&amp;gt;
&amp;lt;a href=&amp;quot;{{ relURL (print &amp;quot;/categories/&amp;quot; . &amp;quot;/&amp;quot; | urlize) }}&amp;quot;&amp;gt;{{ . }}&amp;lt;/a&amp;gt;
  &amp;lt;/div&amp;gt;
  {{ end }}
  {{ end }}
  &amp;lt;h1&amp;gt;&amp;lt;a href=&amp;quot;{{ .RelPermalink }}&amp;quot;&amp;gt;{{ .Title }}&amp;lt;/a&amp;gt;&amp;lt;/h1&amp;gt;
  &amp;lt;div&amp;gt;
{{ if .Date }}&amp;lt;span&amp;gt;{{ .Date.Format &amp;quot;2006-01-02&amp;quot; }}&amp;lt;/span&amp;gt;{{ end }}
{{ with .Params.author }}&amp;lt;span&amp;gt;{{ . }}&amp;lt;/span&amp;gt;{{ end }}
  &amp;lt;/div&amp;gt;
  &amp;lt;div class=&amp;quot;summary&amp;quot;&amp;gt;
{{ $summary := .Description }}
{{ if $summary }}
{{ $summary = (markdownify $summary) }}
{{ else }}
{{ $summary = ((delimit (findRE &amp;quot;(&amp;lt;p.*?&amp;gt;(.|\n)*?&amp;lt;/p&amp;gt;\\s*)+&amp;quot; .Content) &amp;quot;[&amp;amp;hellip;] &amp;quot;) | plainify | truncate (default 200 .Site.Params.summaryLength) (default &amp;quot; &amp;amp;hellip;&amp;quot; .Site.Params.textTruncated ) | replaceRE &amp;quot;&amp;amp;amp;&amp;quot; &amp;quot;&amp;amp;&amp;quot;) }}
{{ end }}
{{ $summary | replaceRE &amp;quot;^([A-Za-z])&amp;quot; &amp;quot;&amp;amp;$1 opf;&amp;quot; | replaceRE &amp;quot;^(&amp;amp;[A-Za-z]) (opf;)&amp;quot; &amp;quot;$1$2&amp;quot; | safeHTML }}
&amp;lt;a href=&amp;quot;{{ .RelPermalink }}&amp;quot; class=&amp;quot;more&amp;quot; title={{ i18n &amp;quot;readMore&amp;quot; }}&amp;gt;{{ i18n &amp;quot;readMore&amp;quot; }} &amp;amp;rarr;&amp;lt;/a&amp;gt;
  &amp;lt;/div&amp;gt;
  &amp;lt;/td&amp;gt;
  {{ if $.IsHome }}
  &amp;lt;td class=&amp;quot;spacer spacer-right&amp;quot;&amp;gt;&amp;lt;/td&amp;gt;
  &amp;lt;td class=&amp;quot;side-title&amp;quot;&amp;gt;{{ with .Section }}&amp;lt;h1&amp;gt;&amp;lt;a href=&amp;quot;{{ print &amp;quot;/&amp;quot; . &amp;quot;/&amp;quot; | relURL }}&amp;quot;&amp;gt;{{ . }}&amp;lt;/a&amp;gt;&amp;lt;/h1&amp;gt;{{ end }}&amp;lt;/td&amp;gt;
  {{ end }}
  &amp;lt;/tr&amp;gt;
  &amp;lt;/tbody&amp;gt;
&amp;lt;/table&amp;gt;
  &amp;lt;/section&amp;gt;
{{ end }}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;section class=&amp;quot;article-list post-card{{ if .Draft }} draft {{ end }}&amp;quot;&amp;gt;&lt;/code&gt; 这里根据页面设置 &lt;code&gt;draft: true/false&lt;/code&gt; 来添加一个额外的 &lt;code&gt;.post-card .draft&lt;/code&gt; 类，用来给草稿做特殊标记（底纹、背景，以及是否在发布时显示&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;给卡片添加 &lt;code&gt;category&lt;/code&gt; 标签，这里仅显示了 1 个标签，并将标签连接到其固定链接。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;{{ with .Params.categories }}
{{ range first 1 . }}
&amp;lt;div class=&amp;quot;categories&amp;quot;&amp;gt;
  &amp;lt;a href=&amp;quot;{{ relURL (print &amp;quot;/categories/&amp;quot; . &amp;quot;/&amp;quot; | urlize) }}&amp;quot;&amp;gt;{{ . }}&amp;lt;/a&amp;gt;
&amp;lt;/div&amp;gt;
{{ end }}
{{ end }}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;添加标题、发布时间和作者。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;h1&amp;gt;&amp;lt;a href=&amp;quot;{{ .RelPermalink }}&amp;quot;&amp;gt;{{ .Title }}&amp;lt;/a&amp;gt;&amp;lt;/h1&amp;gt;
&amp;lt;div&amp;gt;
  {{ if .Date }}&amp;lt;span&amp;gt;{{ .Date.Format &amp;quot;2006-01-02&amp;quot; }}&amp;lt;/span&amp;gt;{{ end }}
  {{ with .Params.author }}&amp;lt;span&amp;gt;{{ . }}&amp;lt;/span&amp;gt;{{ end }}
&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;添加摘要。摘要首先从 &lt;code&gt;description&lt;/code&gt; 中读取，如果没有设置的话，那么将从文章正文（&lt;code&gt;.Content&lt;/code&gt;）中截取。在显示时，通过 &lt;code&gt;replaceRE&lt;/code&gt; 将首字符替换为大字。最后，添加上正文的固定链接。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;div class=&amp;quot;summary&amp;quot;&amp;gt;
  {{ $summary := .Description }}
  {{ if $summary }}
  {{ $summary = (markdownify $summary) }}
  {{ else }}
  {{ $summary = ((delimit (findRE &amp;quot;(&amp;lt;p.*?&amp;gt;(.|\n)*?&amp;lt;/p&amp;gt;\\s*)+&amp;quot; .Content) &amp;quot;[&amp;amp;hellip;] &amp;quot;) | plainify | truncate (default 200 .Site.Params.summaryLength) (default &amp;quot; &amp;amp;hellip;&amp;quot; .Site.Params.textTruncated ) | replaceRE &amp;quot;&amp;amp;amp;&amp;quot; &amp;quot;&amp;amp;&amp;quot;) }}
  {{ end }}
  {{ $summary | replaceRE &amp;quot;^([A-Za-z])&amp;quot; &amp;quot;&amp;amp;$1 opf;&amp;quot; | replaceRE &amp;quot;^(&amp;amp;[A-Za-z]) (opf;)&amp;quot; &amp;quot;$1$2&amp;quot; | safeHTML }}
&amp;lt;a href=&amp;quot;{{ .RelPermalink }}&amp;quot; class=&amp;quot;more&amp;quot; title={{ i18n &amp;quot;readMore&amp;quot; }}&amp;gt;{{ i18n &amp;quot;readMore&amp;quot; }} &amp;amp;rarr;&amp;lt;/a&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;添加 Section。显示在右侧，并链接到 Section 的目录。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;{{ if $.IsHome }}
  &amp;lt;td class=&amp;quot;spacer spacer-right&amp;quot;&amp;gt;&amp;lt;/td&amp;gt;
  &amp;lt;td class=&amp;quot;side-title&amp;quot;&amp;gt;
    {{ with .Section }}
      &amp;lt;h1&amp;gt;&amp;lt;a href=&amp;quot;{{ print &amp;quot;/&amp;quot; . &amp;quot;/&amp;quot; | relURL }}&amp;quot;&amp;gt;{{ . }}&amp;lt;/a&amp;gt;&amp;lt;/h1&amp;gt;
    {{ end }}
  &amp;lt;/td&amp;gt;
{{ end }}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;html-模板-1&#34;&gt;HTML 模板&lt;/h3&gt;
&lt;p&gt;将这一部分的代码改成下面的样子。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;{{ $pages := .Pages }}
{{ if .IsHome }}
{{ $pages = first (default 6 .Site.Params.homePosts) (sort (where .Site.RegularPages &amp;quot;Type&amp;quot; &amp;quot;in&amp;quot; .Site.Params.mainSections) &amp;quot;Date&amp;quot; &amp;quot;desc&amp;quot;) }}
{{ else }}
{{ $pages = (.Paginate $pages).Pages }}
{{ end }}

{{ range $pages }}
&amp;lt;section class=&amp;quot;article-list post-card{{ if .Draft }} draft{{ end }}&amp;quot;&amp;gt;
&amp;lt;table&amp;gt;
  &amp;lt;tbody&amp;gt;
    &amp;lt;tr&amp;gt;
      &amp;lt;td&amp;gt;{{ if .Date }}&amp;lt;span&amp;gt;{{ .Date.Format &amp;quot;2006-01-02&amp;quot; }}&amp;lt;/span&amp;gt;{{ end }}&amp;lt;/td&amp;gt;
      &amp;lt;td&amp;gt;{{ with .Params.author }}&amp;lt;span&amp;gt;{{ . }}&amp;lt;/span&amp;gt;{{ end }}&amp;lt;/td&amp;gt;
      &amp;lt;td&amp;gt;&amp;lt;h1&amp;gt;&amp;lt;a href=&amp;quot;{{ .RelPermalink }}&amp;quot;&amp;gt;{{ .Title }}&amp;lt;/a&amp;gt;&amp;lt;/h1&amp;gt;&amp;lt;/td&amp;gt;
    &amp;lt;/tr&amp;gt;
  &amp;lt;/tbody&amp;gt;
&amp;lt;/table&amp;gt;
&amp;lt;/section&amp;gt;
{{ end }}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;css-设置-1&#34;&gt;CSS 设置&lt;/h3&gt;
&lt;p&gt;接下来对相应的 CSS 代码动一下手脚。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;将卡片显示的宽度从 50% 调整到 100%；&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-css&#34;&gt;.list main &amp;gt; .post-card {
  flex: 0 0 calc(50% - .5em);
}

/* 改为下面的样子 */

.list main &amp;gt; .post-card {
  flex: 0 0 100%;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;设置时间列、作者列的宽度&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-css&#34;&gt;.post-card td:nth-child(1) {width: 15%}
.post-card td:nth-child(2) {width: 20%}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;去掉标题下面的细线&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-css&#34;&gt;.article-list h1 {
  margin: 5px 0px 10px;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;小结&#34;&gt;小结&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;先改 HTML 模板，设置内容和框架；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;再改 CSS 设置，调整对象的显示效果。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;
&lt;p&gt;默认情况下，draft 仅在本地预览时可见，而使用 &lt;code&gt;blogdown::build_site()&lt;/code&gt; 时不可见。&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;

        </description>
      </item>
    
      <item>
        <title>整理老文章</title>
        <link>bio-spring/post/2023/08/08/tidy-old-blog-post/</link>
        <pubDate>Tue, 08 Aug 2023 00:00:00 +0000</pubDate>
        <author>gaoch</author>
        <guid>bio-spring/post/2023/08/08/tidy-old-blog-post/</guid>
        <description>
          &lt;p&gt;今天，花时间整理了一下个人网站，主要做了下面这些工作：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;选择了一个主题 hugo-prose。选择这个主题的原因是它足够简单，体积小，而且拥有不少需要的功能。如导航条、网站地图、目录、卡片、版权、引文等。&lt;/li&gt;
&lt;li&gt;整理了之前的老文章。删掉了一些完全没有营养的帖子。大多数予以保留，并添加了 slug 标签，调整目录结构。写了一个脚本完成这项工作。&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# find all files
files = list.files(path = &amp;quot;content/post/&amp;quot;, pattern = stringr::regex(&amp;quot;*.(md|rmd)&amp;quot;, ignore.case = TRUE), full.names = TRUE)
lapply(files, function(file){
  # retrieve slug from filename
  filename = basename(file)
  ext = xfun::file_ext(file)
  basename = gsub(paste0(&amp;quot;.&amp;quot;, ext), &amp;quot;&amp;quot;, filename)
  slug = gsub(&amp;quot;[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}-&amp;quot;, &amp;quot;&amp;quot;, basename)

  # add tags to those posts
  header = blogdown:::split_yaml_body(xfun::read_utf8(file))[[&#39;yaml_list&#39;]]
  header$file = file
  if (is.null(header[[&#39;slug&#39;]])) header$slug = slug
  if (is.null(header[[&amp;quot;author&amp;quot;]])) header$author = &amp;quot;gaoch&amp;quot;
  if (header$date &amp;lt; &amp;quot;2008-11-25&amp;quot;){
    header$categories = c(&amp;quot;旧文&amp;quot;,&amp;quot;百度空间&amp;quot;)
  } else if (header$date &amp;lt; &amp;quot;2018-10-17&amp;quot;){
    header$categories = c(&amp;quot;旧文&amp;quot;,&amp;quot;WordPress博客&amp;quot;)
  } 
  
  do.call(blogdown:::modify_yaml, header)
  
  # move post to new place
  path = paste0(&amp;quot;content/post/&amp;quot;, basename)
  dir.create(path)
  success = file.copy(from = file,
            to = paste(path, paste0(&amp;quot;index.zh.&amp;quot;, ext), sep = &amp;quot;/&amp;quot;))
  if(success){
    file.remove(file)
  }
})
&lt;/code&gt;&lt;/pre&gt;

        </description>
      </item>
    
      <item>
        <title>Setup blogdown site</title>
        <link>bio-spring/post/2018/10/16/setup-blogdown-site/</link>
        <pubDate>Tue, 16 Oct 2018 00:00:00 +0000</pubDate>
        <author>gaoch</author>
        <guid>bio-spring/post/2018/10/16/setup-blogdown-site/</guid>
        <description>
          &lt;p&gt;设置 blogdown 主要参考了 &lt;a href=&#34;https://cosx.org/2018/01/build-blog-with-blogdown-hugo-netlify-github/&#34;&gt;这里&lt;/a&gt;，设置 git 认证参考了 &lt;a href=&#34;https://www.r-bloggers.com/rstudio-pushing-to-github-with-ssh-authentication/&#34;&gt;这里&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;软件的安装不提，简单的步骤如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在 GitHub 上创建一个 Repository。&lt;/li&gt;
&lt;li&gt;在 RStudio 中使用 Git 创建一个 Project，与 GitHub 关联上。&lt;/li&gt;
&lt;li&gt;在 RStudio 中新建一个 Project （是的，要创建两次），属性设为 Website from blogdown，目录设置为 Git 项目的本地文件夹。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;网站设置完毕&lt;/strong&gt;。写完新文章之后，可以 Commit，可以 Push 到 GitHub。&lt;/li&gt;
&lt;li&gt;托管到 netlify，按照提示一步步进行就可以。&lt;/li&gt;
&lt;li&gt;但是要设置一下 &lt;code&gt;HUGO_VERSION = 0.48&lt;/code&gt;（ &amp;gt; 0.20 即可，默认的 0.17 是不能编译成功的）。&lt;/li&gt;
&lt;li&gt;设置 Git 密钥，添加 public key 到 Github 上面。&lt;/li&gt;
&lt;li&gt;设置 Git 参数：&lt;code&gt;git config remote.origin.url git@github.com:your_username/your_project.git&lt;/code&gt;。&lt;/li&gt;
&lt;/ol&gt;

        </description>
      </item>
    
  </channel>
</rss>
