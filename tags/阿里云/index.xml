<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>阿里云 on BIO-SPRING</title>
    <link>bio-spring/tags/%E9%98%BF%E9%87%8C%E4%BA%91/</link>
    <description>Recent content in 阿里云 on BIO-SPRING</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Tue, 23 Oct 2018 00:00:00 +0000</lastBuildDate>
    <atom:link href="bio-spring/tags/%E9%98%BF%E9%87%8C%E4%BA%91/" rel="self" type="application/rss+xml" />

    
      <item>
        <title>三分钟在阿里云中用上免费SSL</title>
        <link>bio-spring/post/2018/10/23/2018-10-23-setup-ssl-in-aliyun/</link>
        <pubDate>Tue, 23 Oct 2018 00:00:00 +0000</pubDate>
        <author>gaoch</author>
        <guid>bio-spring/post/2018/10/23/2018-10-23-setup-ssl-in-aliyun/</guid>
        <description>
          &lt;blockquote&gt;
&lt;p&gt;给自己的网站添加SSL证书其实并不复杂，但是关键一点就是首先要拥有一个SSL证书。由于SSL证书价格不菲，很多个人站长会选择放弃使用Https。但是，自从开源、免费的Let’s
Encrypt证书出现后，我觉得SSL也是我们草根站长可以玩的了。
&lt;a href=&#34;https://blog.csdn.net/ithomer/article/details/78075006&#34;&gt;https://blog.csdn.net/ithomer/article/details/78075006&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;根据 &lt;a href=&#34;https://certbot.eff.org/lets-encrypt/ubuntubionic-apache&#34;&gt;https://certbot.eff.org/lets-encrypt/ubuntubionic-apache&lt;/a&gt;
官方教程指引，可以很快在阿里云的服务器中用上Let’s
Encrypt的证书，全程只需三分钟。&lt;/p&gt;
&lt;h2 id=&#34;安装软件&#34;&gt;安装软件&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-lang:sh&#34;&gt;$ sudo apt-get update
$ sudo apt-get install software-properties-common
$ sudo add-apt-repository ppa:certbot/certbot
$ sudo apt-get update
$ sudo apt-get install python-certbot-apache
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;获取证书&#34;&gt;获取证书&lt;/h2&gt;
&lt;p&gt;运行下述命令将启动一个向导，自动为你获取证书，并更新APACHE网站配置启用证书。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-lang:sh&#34;&gt;$ sudo certbot --apache
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;更新证书&#34;&gt;更新证书&lt;/h2&gt;
&lt;p&gt;从Let’s
Encrypt申请的证书有效期很短，只有90天。因此需要每隔一段时间续订一下。运行下列命令将模拟更新证书。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-lang:sh&#34;&gt;$ sudo certbot renew --dry-run
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;添加 cron 来自动化。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-lang:sh&#34;&gt;# crontab -e
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;在 crontab 中添加下列两行，将会每隔90天自动运行续订任务。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-wp-block-preformatted&#34;&gt;# renew Let&#39;s Encrypt SSL cert every 90 days
0  0  */90 * * certbot renew
&lt;/code&gt;&lt;/pre&gt;

        </description>
      </item>
    
      <item>
        <title>在阿里云ECS上设置swap分区</title>
        <link>bio-spring/post/2017/10/10/2017-10-10-enable-swap-in-aliyun-ecs/</link>
        <pubDate>Tue, 10 Oct 2017 00:00:00 +0000</pubDate>
        <author>gaoch</author>
        <guid>bio-spring/post/2017/10/10/2017-10-10-enable-swap-in-aliyun-ecs/</guid>
        <description>
          &lt;p&gt;对于内存比较小的ECS来说，开启swap可以避免偶尔的内存溢出。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-lang:sh&#34;&gt;#查看内存和虚拟分区情况
free -h

#创建虚拟分区(1GB)
dd if=/dev/zero of=/mnt/swap bs=1M count=1000
mkswap /mnt/swap

#启用swap
swapon /mnt/swap
echo 10 &amp;gt; /proc/sys/vm/swappiness

#查看swap
free -h

#写入配置
echo -e &amp;quot;\n/mnt/swap swap swap defaults 0 0\n&amp;quot; &amp;gt;&amp;gt; /etc/fstab
vi /etc/sysctl.conf
# 将其中的对应行的数值从0更改为10,10%剩余内存时使用swap
# vm.swapiness=10
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;以上的代码将创建1000M的swap分区（bs × count），即时启用。在剩余10%
（swapiness）物理内存时将会使用swap。&lt;/p&gt;
&lt;p&gt;同时，将配置写入系统文件。重启之后仍然会使用上述配置。&lt;/p&gt;

        </description>
      </item>
    
      <item>
        <title>cloudfs无法上传的故障排除</title>
        <link>bio-spring/post/2015/09/27/2015-09-27-cloudfs-upload-failed/</link>
        <pubDate>Sun, 27 Sep 2015 00:00:00 +0000</pubDate>
        <author>gaoch</author>
        <guid>bio-spring/post/2015/09/27/2015-09-27-cloudfs-upload-failed/</guid>
        <description>
          &lt;p&gt;之前设置WordPress使用阿里云OSS存储图片，今天出问题了。&lt;a href=&#34;http://bio-spring.top/cloudfs-wp-uploads/&#34;&gt;设置方法在这里&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;错误提示：cannot access oss: Transport endpoint is not connected&lt;/p&gt;
&lt;p&gt;解决方案如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;去除挂载&lt;/li&gt;
&lt;li&gt;重启Cloudfs服务&lt;/li&gt;
&lt;li&gt;设置权限&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;[cc lang=”bash”]&lt;br&gt;
umount /mnt/oss&lt;br&gt;
service cloudfs restart&lt;br&gt;
chmod 666 /mnt/oss&lt;br&gt;
[/cc]&lt;/p&gt;

        </description>
      </item>
    
      <item>
        <title>整合 OSS 开放存储到 WordPress 系统</title>
        <link>bio-spring/post/2015/08/23/2015-08-23-cloudfs-wp-uploads/</link>
        <pubDate>Sun, 23 Aug 2015 00:00:00 +0000</pubDate>
        <author>gaoch</author>
        <guid>bio-spring/post/2015/08/23/2015-08-23-cloudfs-wp-uploads/</guid>
        <description>
          &lt;p&gt;使用 OSS 存储 WordPress 相当于将 云服务器 的存储免费扩大了。&lt;/p&gt;
&lt;h3 id=&#34;安装cloudfs&#34;&gt;安装cloudfs&lt;/h3&gt;
&lt;p&gt;-在云市场搜索cloudfs，获取下载链接。&lt;br&gt;
-将下载的安装包上传至云服务器。&lt;br&gt;
-安装依赖包。&lt;br&gt;
-以默认设置安装。&lt;/p&gt;
&lt;p&gt;[cc lang=”bash”]&lt;br&gt;
# Install dependence&lt;br&gt;
apt-get install libcurl4-openssl-dev libssl-dev pkg-config libxml2
libxml2-dev libfuse-dev libunwind8-dev&lt;br&gt;
[/cc]&lt;/p&gt;
&lt;h3 id=&#34;配置cloudfs&#34;&gt;配置cloudfs&lt;/h3&gt;
&lt;p&gt;[cc lang=”bash”]&lt;br&gt;
vi /usr/local/cloudfs/conf/cloudfs.conf&lt;br&gt;
[/cc]&lt;/p&gt;
&lt;p&gt;需要配置的项目有： HOST 、ID 、KEY 、BUCKET 等 4 项必须；若干可选项。&lt;/p&gt;
&lt;h3 id=&#34;测试&#34;&gt;测试&lt;/h3&gt;
&lt;p&gt;[cc lang=”bash”]&lt;br&gt;
# Start cloudfs&lt;br&gt;
service cloudfs start&lt;br&gt;
service cloudfs status&lt;br&gt;
# 目录和文件测试，在 OSS 控制台会看到相应变化&lt;br&gt;
mkdir /mnt/oss/test&lt;br&gt;
touch /mnt/oss/test/test.txt&lt;br&gt;
[/cc]&lt;/p&gt;
&lt;h3 id=&#34;迁移和设置媒体库&#34;&gt;迁移和设置媒体库&lt;/h3&gt;
&lt;p&gt;[cc lang=”bash”]&lt;br&gt;
# 设置 WordPress 媒体库位置&lt;br&gt;
cd /mnt/oss&lt;br&gt;
mkdir wp_uploads&lt;br&gt;
# 将原有媒体库内容迁移过来&lt;br&gt;
cp -R /var/www/html/wp-content/uploads/* wp_uploads/&lt;br&gt;
# 备份原有媒体库，同时腾出挂载点&lt;br&gt;
mv /var/www/html/wp-content/uploads/
/var/www/html/wp-content/uploads_bak&lt;br&gt;
# 挂载 OSS cloudfs 到 WordPress 媒体库&lt;br&gt;
ln -s /mnt/oss/wp_uploads/ /var/www/html/wp-content/uploads&lt;br&gt;
[/cc]&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://cloudfs-spring.oss-cn-qingdao.aliyuncs.com/bio_spring_uploads/2015/08/wp-cloudfs.png&#34;&gt;&lt;img src=&#34;https://cloudfs-spring.oss-cn-qingdao.aliyuncs.com/bio_spring_uploads/2015/08/wp-cloudfs-300x103.png&#34; class=&#34;alignnone size-medium wp-image-600&#34; sizes=&#34;(max-width: 300px) 100vw, 300px&#34; srcset=&#34;https://cloudfs-spring.oss-cn-qingdao.aliyuncs.com/bio_spring_uploads/2015/08/wp-cloudfs-300x103.png 300w, https://cloudfs-spring.oss-cn-qingdao.aliyuncs.com/bio_spring_uploads/2015/08/wp-cloudfs.png 867w&#34; width=&#34;300&#34; height=&#34;103&#34; alt=&#34;wp-cloudfs&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在 WordPress 媒体库上传一个新内容，检查是否可用。&lt;/p&gt;
&lt;p&gt;参考资料：&lt;br&gt;
&lt;a href=&#34;http://www.513624.com/archives/829.html&#34;&gt;http://www.513624.com/archives/829.html&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;http://bbs.aliyun.com/read/236273.html&#34;&gt;http://bbs.aliyun.com/read/236273.html&lt;/a&gt;&lt;/p&gt;

        </description>
      </item>
    
      <item>
        <title>将 WordPress 迁移到 阿里云</title>
        <link>bio-spring/post/2015/08/21/2015-08-21-wordpress-cloud/</link>
        <pubDate>Fri, 21 Aug 2015 00:00:00 +0000</pubDate>
        <author>gaoch</author>
        <guid>bio-spring/post/2015/08/21/2015-08-21-wordpress-cloud/</guid>
        <description>
          &lt;p&gt;最近将国外的主机迁移到了阿里云（参见：&lt;a href=&#34;http://bio-spring.top/?page_id=16&#34;&gt;Site
Changelog&lt;/a&gt;）。没办法，GFW太厉害了。留在外面只能做僵尸网站。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;本文简要介绍了将WordPress迁移到云服务器ECS、云数据库RDS，域名绑定到云解析的方法。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;如果要购买 ECS 云服务器，使用我的邀请码（&lt;strong&gt;U6FOVY&lt;/strong&gt;，有效期截止
2015-11-30）可以得到 &lt;strong&gt;九折&lt;/strong&gt; 优惠。&lt;/p&gt;
&lt;h3 id=&#34;新服务器&#34;&gt;新服务器&lt;/h3&gt;
&lt;p&gt;安装LAMP：&lt;a href=&#34;http://bio-spring.top/?p=584&#34;&gt;Ubuntu快速安装 LAMP&lt;/a&gt;&lt;br&gt;
安装phpmyadmin：&lt;br&gt;
[cc lang=”bash”]&lt;br&gt;
sudo apt-get install phpmyadmin&lt;br&gt;
ln -s /usr/share/phpmyadmin/ /var/www/html/phpmyadmin&lt;br&gt;
[/cc]&lt;/p&gt;
&lt;h3 id=&#34;旧服务器&#34;&gt;旧服务器&lt;/h3&gt;
&lt;p&gt;WordPress整站打包下载。&lt;br&gt;
使用一个插件生成数据库备份wp-DB-backup：wp_backup.sql.gz&lt;/p&gt;
&lt;h3 id=&#34;迁移&#34;&gt;迁移&lt;/h3&gt;
&lt;p&gt;上传整站到/var/www/html，只需要修改wp-config.php更新数据库信息。&lt;br&gt;
打开http://newsite.com/phpmyadmin，创建一个数据库，将wp_backup.sql.gz
导入（import）。&lt;br&gt;
进入options工作表，更新home和siteurl的值。&lt;br&gt;
[cc lang=”mysql”]&lt;br&gt;
mysql&amp;gt; use wordpress;&lt;br&gt;
mysql&amp;gt; source wp.sql;&lt;br&gt;
mysql&amp;gt; update `wp1_options` set `option_value` =
“http://bio-spring.top/” where `option_name` = “siteurl”;&lt;br&gt;
mysql&amp;gt; update `wp1_options` set `option_value` =
“http://bio-spring.top/” where `option_name` = “home”;&lt;br&gt;
[/cc]&lt;/p&gt;
&lt;h3 id=&#34;使用云数据库-rds&#34;&gt;使用云数据库 RDS&lt;/h3&gt;
&lt;p&gt;在RDS控制面板创建database，然后登录到RDS，同上设置。&lt;br&gt;
[cc lang=”bash”]&lt;br&gt;
bash$ mysql -uuser -ppasswd -husername.mysql.rds.aliyuncs.com #
登录到RDS&lt;br&gt;
[/cc]&lt;/p&gt;
&lt;h3 id=&#34;绑定域名到阿里云解析&#34;&gt;绑定域名到阿里云解析&lt;/h3&gt;
&lt;p&gt;进入域名注册上后台，修改NameServer为万网NS。&lt;br&gt;
&lt;a href=&#34;https://cloudfs-spring.oss-cn-qingdao.aliyuncs.com/bio_spring_uploads/2015/08/clipboard.png&#34;&gt;&lt;img src=&#34;https://cloudfs-spring.oss-cn-qingdao.aliyuncs.com/bio_spring_uploads/2015/08/clipboard.png&#34; class=&#34;alignnone size-full wp-image-588&#34; width=&#34;609&#34; height=&#34;465&#34; alt=&#34;godaddy_dns&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;在阿里云解析添加解析等待生效即可&#34;&gt;在阿里云解析“添加解析”，等待生效即可。&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://cloudfs-spring.oss-cn-qingdao.aliyuncs.com/bio_spring_uploads/2015/08/aliyun_dns.png&#34;&gt;&lt;img src=&#34;https://cloudfs-spring.oss-cn-qingdao.aliyuncs.com/bio_spring_uploads/2015/08/aliyun_dns.png&#34; class=&#34;alignnone size-full wp-image-587&#34; width=&#34;1093&#34; height=&#34;78&#34; alt=&#34;aliyun_dns&#34; /&gt;&lt;/a&gt;&lt;br&gt;
搞定了。&lt;/p&gt;

        </description>
      </item>
    
      <item>
        <title>如何连接阿里云数据库RDS</title>
        <link>bio-spring/post/2015/08/21/2015-08-21-connect-to-rds/</link>
        <pubDate>Fri, 21 Aug 2015 00:00:00 +0000</pubDate>
        <author>gaoch</author>
        <guid>bio-spring/post/2015/08/21/2015-08-21-connect-to-rds/</guid>
        <description>
          &lt;h3 id=&#34;mysql客户端方式&#34;&gt;mysql客户端方式&lt;/h3&gt;
&lt;p&gt;用户安装MySQL客户端后，可进入命令行方式链接数据库。&lt;br&gt;
命令格式：mysql -u user_name -h example.mysql.rds.aliyuncs.com -P3306
-pxxxx&lt;br&gt;
其中，-u 指定的是用户名， -h指定的是主机名， -P指定的是端口，
-p指定的是密码。&lt;/p&gt;
&lt;h3 id=&#34;wordpress使用rds&#34;&gt;WordPress使用RDS&lt;/h3&gt;
&lt;p&gt;添加服务器IP到白名单&lt;br&gt;
修改wp-config.php&lt;br&gt;
参见&lt;a href=&#34;http://bio-spring.top/?p=586&#34;&gt;WordPress迁移&lt;/a&gt;&lt;/p&gt;

        </description>
      </item>
    
  </channel>
</rss>
