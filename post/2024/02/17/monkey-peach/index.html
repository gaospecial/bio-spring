<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title> 猴子吃桃问题 | BIO-SPRING</title>
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xiee/utils@v1.13.54/css/article.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xiee/utils/css/heading-anchor.min.css">
    <link rel="stylesheet" href="/bio-spring/css/style.css" />
    <link rel="stylesheet" href="/bio-spring/css/fonts.css" />
    <link rel="stylesheet" href="/bio-spring/css/custom.css" />
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="猴子吃桃问题">
  <meta name="twitter:description" content="寒假作业上有一道题：一只猴子有很多桃子，每天都吃一半加 1 个，最后在第 4 天的时候只剩下 1 个桃子。问它原来有几个桃子？
这是一个迭代的问题，往前数第 \(n\) 天的桃子数量是 \(f(n)\)，且 \(f(n) = (f(n-1)&#43;1) * 2\)。若 \(n = 0\)，则 \(f(0) =1\)。可以写成下面的形式。
taozi = function(n){ if (n == 0) return(1) (taozi(n-1) &#43; 1) * 2 } 如果花了 100 天才剩下 1 个桃子，那么原有的桃子数量将会很多（3.8029518\times 10^{30} 个）。
x = 1:100 y = sapply(1:100, taozi) library(dplyr, quietly = TRUE) ## ## Attaching package: &#39;dplyr&#39; ## The following objects are masked from &#39;package:stats&#39;: ## ## filter, lag ## The following objects are masked from &#39;package:base&#39;: ## ## intersect, setdiff, setequal, union library(ggplot2) df = tibble(day = x, number = y) # 桃子数量 ggplot(df, aes(day, number)) &#43; geom_point() # 对桃子数量进行 log 变换，得到线性关系 ggplot(df, aes(day, number)) &#43; geom_point() &#43; scale_y_log10() 为了更加形象的展示这种变化，不妨祭出 emojifont 软件包，再施加一些魔法，可以得到 1 - 9 天情况下桃子的数量。">


  </head>

  <body>

    <nav class="menu sticky-top">
    <ul>
      <li class="left">
        <a href="/"><span>BIO-SPRING</span></a>
      </li>
      
      <li>
        <a href="/bio-spring">Home</a>
      </li>
      
      <li>
        <a href="/bio-spring/post/">Blog Post</a>
      </li>
      
      <li>
        <a href="/bio-spring/publication/full-publication-list/">Publication</a>
      </li>
      
      <li>
        <a href="/bio-spring/work/">Work</a>
      </li>
      
      <li id="menu-search">
        <a href="/bio-spring/#">Search</a>
      </li>
      
    </ul>
    </nav>


<div class="container single">
<main>

<div class="article-meta">
<h1><span class="title">猴子吃桃问题</span></h1>

<h3 class="author">
gaoch
</h3>

<h3 class="date">2024-02-17</h3>
<p class="terms">
  
  
  Categories: <a href="/categories/%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF">信息技术</a> 
  
  
  
  Tags: <a href="/tags/ggplot2">ggplot2</a> <a href="/tags/%E7%AE%97%E6%B3%95">算法</a> 
  
  
</p>
</div>

<div class="article">
<p>寒假作业上有一道题：一只猴子有很多桃子，每天都吃一半加 1 个，最后在第 4 天的时候只剩下 1 个桃子。问它原来有几个桃子？</p>
<p>这是一个迭代的问题，往前数第 <code>\(n\)</code> 天的桃子数量是 <code>\(f(n)\)</code>，且  <code>\(f(n) = (f(n-1)+1) * 2\)</code>。若 <code>\(n = 0\)</code>，则 <code>\(f(0) =1\)</code>。可以写成下面的形式。</p>
<pre><code class="language-r">taozi = function(n){
  if (n == 0) return(1)
  (taozi(n-1) + 1) * 2
}
</code></pre>
<p>如果花了 100 天才剩下 1 个桃子，那么原有的桃子数量将会很多（3.8029518\times 10^{30} 个）。</p>
<pre><code class="language-r">x = 1:100
y = sapply(1:100, taozi)

library(dplyr, quietly = TRUE)
</code></pre>
<pre><code>## 
## Attaching package: 'dplyr'
</code></pre>
<pre><code>## The following objects are masked from 'package:stats':
## 
##     filter, lag
</code></pre>
<pre><code>## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union
</code></pre>
<pre><code class="language-r">library(ggplot2)
df = tibble(day = x, number = y)

# 桃子数量
ggplot(df, aes(day, number)) + geom_point()
</code></pre>
<img src="bio-spring/post/2024/02/17/monkey-peach/index.zh_files/figure-html/unnamed-chunk-2-1.png" width="672" />
<pre><code class="language-r"># 对桃子数量进行 log 变换，得到线性关系
ggplot(df, aes(day, number)) + geom_point() + scale_y_log10()
</code></pre>
<img src="bio-spring/post/2024/02/17/monkey-peach/index.zh_files/figure-html/unnamed-chunk-2-2.png" width="672" />
<p>为了更加形象的展示这种变化，不妨祭出 <code>emojifont</code> 软件包，再施加一些魔法，可以得到 1 - 9 天情况下桃子的数量。</p>
<pre><code class="language-r"># 根据桃子数量生成一个正方形矩阵
grid = function(n){
  i = ceiling(sqrt(n))
  tibble(
    x = rep(1:i, length.out = i^2),
    y = rep(i:1, each =i)
  )
}

library(emojifont)
plots = lapply(1:9, function(x){
  t = taozi(x-1)
  g = grid(t)[1:t,]
  ggplot() + 
    geom_emoji(&quot;peach&quot;, x = g$x, y = g$y, size = 10 - x, color = &quot;red1&quot;) +
    coord_equal() +
    theme_void() +
    scale_x_continuous(expand = expansion(0.1, 0.5)) +
    scale_y_continuous(expand = expansion(0.1, 0.5)) +
    labs(subtitle = paste0(x, &quot;d: &quot;, t)) +
    theme(panel.border = element_rect(color = &quot;grey&quot;, linewidth = 1, fill = NA))
})

cowplot::plot_grid(plotlist = plots, align = &quot;hv&quot;)
</code></pre>
<img src="bio-spring/post/2024/02/17/monkey-peach/index.zh_files/figure-html/unnamed-chunk-3-1.png" width="768" />

</div>
</main>

<section class="appendix">


<div>
  <div class="side side-left"><h3>作者简介</h3></div>
  <div>





<div>Chun-Hui Gao is a Research Associate at <a href="http://www.hzau.edu.cn">Huazhong Agricultural University</a>.</div>


</div>
</div>






<div>
  <div class="side side-left"><h3>重复使用</h3></div>
  Text and figures are licensed under <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution CC BY 4.0</a>. The source code is licensed under MIT. The full source is available at <a href="https://github.com/yihui/hugo-prose">https://github.com/yihui/hugo-prose</a>.
</div>



<div>
  <div class="side side-left"><h3>欢迎修订</h3></div>
  
  
  
    
  
  如果您发现本文里含有任何错误（包括错别字和标点符号），欢迎<a href="https://github.com/gaospecial/bio-spring/edit/master/content/post/2024-02-17-monkey-peach/index.zh.Rmd" id="edit-link">在本站的 GitHub 项目里提交修订意见。</a>
</div>




<div>
  <div class="side side-left"><h3>引用本文</h3></div>
  <p>如果您使用了本文的内容，请按照以下方式引用：</p>
  <pre><code>gaoch (2024). 猴子吃桃问题. BIO-SPRING. bio-spring/post/2024/02/17/monkey-peach/</code></pre>
  <p>BibTeX citation</p>
  <pre><code>@misc{
  title = "猴子吃桃问题",
  author = "gaoch",
  year = "2024",
  journal = "BIO-SPRING",
  note = "bio-spring/post/2024/02/17/monkey-peach/"
}</code></pre>
</div>

</section>



<nav class="post-nav">
  <span class="nav-next">&larr; <a href="bio-spring/post/2024/01/11/dplyr-filter-expression/" title=下一篇&#32;(旧)>dplyr::filter() 中的表达式</a></span>
  &hercon;
  <span class="nav-prev"><a href="bio-spring/post/2024/08/11/random-surface/" title=上一篇&#32;(新)>Random Surface</a> &rarr;</span>
</nav>




<section class="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var disqus_js = '//bio-spring.disqus.com/embed.js';
    var d = document, s = d.createElement('script');
    s.src = disqus_js; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    var t = d.getElementById('disqus_thread');
    var b = false, l = function(scroll) {
      if (b) return;
      (d.head || d.body).appendChild(s); b = true;
      if (scroll) t.scrollIntoView();
    }
    s.onerror = function(e) {
      if (sessionStorage.getItem('failure-note')) return;
      t.innerText = 'Sorry, but you cannot make comments because Disqus failed to load for some reason. It is known to be blocked in China. If you are sure it is not blocked in your region, please refresh the page. 中国大陆地区读者需要翻墙才能发表评论。';
      t.style.border = '1px dashed';
      t.style.padding = '.5em';
      t.style.background = 'lightyellow';
      sessionStorage.setItem('failure-note', true);
    };
    
    if (location.hash.match(/^#comment-[0-9]+$/)) return l(true);
    var c = function() {
      if (b) return;
      var rect = t.getBoundingClientRect();
      if (rect.top < window.innerHeight && rect.bottom >= 0) l();
    };
    window.addEventListener('load', c);
    d.addEventListener('scroll', c);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>


</div>


  <footer>
  
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>



<script src="//yihui.org/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>



      <script async src="https://www.googletagmanager.com/gtag/js?id=G-77M8KZTCMR"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-77M8KZTCMR');
        }
      </script>


<script src="https://cdn.jsdelivr.net/combine/npm/@xiee/utils/js/number-sections.min.js,npm/@xiee/utils/js/toc.min.js,npm/@xiee/utils/js/toc-highlight.min.js,npm/@xiee/utils/js/sidenotes.min.js,npm/@xiee/utils/js/right-quote.min.js,npm/@xiee/utils/js/center-img.min.js,npm/@xiee/utils/js/fix-pandoc.min.js,npm/@xiee/utils/js/heading-anchor.min.js" defer></script>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xiee/utils/css/prism-xcode.min.css">
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" defer></script>


  <div class="footer">
  
  <ul class="copyright">
    <li>© <a href="https://bio-spring.top">Bio-Spring</a> 2006 &ndash; 2025 <a href="https://beian.miit.gov.cn">豫ICP备2021003240号</a></li>
  </ul>
  
  <ul>
    
    <li>
      <a href="/bio-spring/404.html">Contact</a>
    </li>
    
    <li class="optional">
      <a href="/bio-spring/categories/">Categories</a>
    </li>
    
    <li class="optional">
      <a href="/bio-spring/tags/">Tags</a>
    </li>
    
    <li id="menu-edit">
      <a href="#">Suggest an edit</a>
    </li>
    
    <li>
      <a href="#">Back to top</a>
    </li>
    
  </ul>
  </div>
  
  </footer>
  <script src="/bio-spring/js/features.js" defer></script>
  </body>
</html>

