<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title> 整理老文章 | BIO-SPRING</title>
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xiee/utils@v1.13.54/css/article.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xiee/utils/css/heading-anchor.min.css">
    <link rel="stylesheet" href="/bio-spring/css/style.css" />
    <link rel="stylesheet" href="/bio-spring/css/fonts.css" />
    <link rel="stylesheet" href="/bio-spring/css/custom.css" />
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="整理老文章">
  <meta name="twitter:description" content="今天，花时间整理了一下个人网站，主要做了下面这些工作：
选择了一个主题 hugo-prose。选择这个主题的原因是它足够简单，体积小，而且拥有不少需要的功能。如导航条、网站地图、目录、卡片、版权、引文等。 整理了之前的老文章。删掉了一些完全没有营养的帖子。大多数予以保留，并添加了 slug 标签，调整目录结构。写了一个脚本完成这项工作。 # find all files files = list.files(path = &#34;content/post/&#34;, pattern = stringr::regex(&#34;*.(md|rmd)&#34;, ignore.case = TRUE), full.names = TRUE) lapply(files, function(file){ # retrieve slug from filename filename = basename(file) ext = xfun::file_ext(file) basename = gsub(paste0(&#34;.&#34;, ext), &#34;&#34;, filename) slug = gsub(&#34;[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}-&#34;, &#34;&#34;, basename) # add tags to those posts header = blogdown:::split_yaml_body(xfun::read_utf8(file))[[&#39;yaml_list&#39;]] header$file = file if (is.null(header[[&#39;slug&#39;]])) header$slug = slug if (is.null(header[[&#34;author&#34;]])) header$author = &#34;gaoch&#34; if (header$date &lt; &#34;2008-11-25&#34;){ header$categories = c(&#34;旧文&#34;,&#34;百度空间&#34;) } else if (header$date &lt; &#34;2018-10-17&#34;){ header$categories = c(&#34;旧文&#34;,&#34;WordPress博客&#34;) } do.call(blogdown:::modify_yaml, header) # move post to new place path = paste0(&#34;content/post/&#34;, basename) dir.create(path) success = file.copy(from = file, to = paste(path, paste0(&#34;index.zh.&#34;, ext), sep = &#34;/&#34;)) if(success){ file.remove(file) } })">


  </head>

  <body>

    <nav class="menu sticky-top">
    <ul>
      <li class="left">
        <a href="/"><span>BIO-SPRING</span></a>
      </li>
      
      <li>
        <a href="/bio-spring">Home</a>
      </li>
      
      <li>
        <a href="/bio-spring/post/">Blog Post</a>
      </li>
      
      <li>
        <a href="/bio-spring/publication/full-publication-list/">Publication</a>
      </li>
      
      <li>
        <a href="/bio-spring/work/">Work</a>
      </li>
      
      <li id="menu-search">
        <a href="/bio-spring/#">Search</a>
      </li>
      
    </ul>
    </nav>


<div class="container single">
<main>

<div class="article-meta">
<h1><span class="title">整理老文章</span></h1>

<h3 class="author">
gaoch
</h3>

<h3 class="date">2023-08-08</h3>
<p class="terms">
  
  
  Categories: <a href="/categories/%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF">信息技术</a> 
  
  
  
  Tags: <a href="/tags/r">R</a> <a href="/tags/blogdown">blogdown</a> <a href="/tags/wordpress">WordPress</a> 
  
  
</p>
</div>

<div class="article">
<p>今天，花时间整理了一下个人网站，主要做了下面这些工作：</p>
<ol>
<li>选择了一个主题 hugo-prose。选择这个主题的原因是它足够简单，体积小，而且拥有不少需要的功能。如导航条、网站地图、目录、卡片、版权、引文等。</li>
<li>整理了之前的老文章。删掉了一些完全没有营养的帖子。大多数予以保留，并添加了 slug 标签，调整目录结构。写了一个脚本完成这项工作。</li>
</ol>
<pre><code class="language-r"># find all files
files = list.files(path = &quot;content/post/&quot;, pattern = stringr::regex(&quot;*.(md|rmd)&quot;, ignore.case = TRUE), full.names = TRUE)
lapply(files, function(file){
  # retrieve slug from filename
  filename = basename(file)
  ext = xfun::file_ext(file)
  basename = gsub(paste0(&quot;.&quot;, ext), &quot;&quot;, filename)
  slug = gsub(&quot;[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}-&quot;, &quot;&quot;, basename)

  # add tags to those posts
  header = blogdown:::split_yaml_body(xfun::read_utf8(file))[['yaml_list']]
  header$file = file
  if (is.null(header[['slug']])) header$slug = slug
  if (is.null(header[[&quot;author&quot;]])) header$author = &quot;gaoch&quot;
  if (header$date &lt; &quot;2008-11-25&quot;){
    header$categories = c(&quot;旧文&quot;,&quot;百度空间&quot;)
  } else if (header$date &lt; &quot;2018-10-17&quot;){
    header$categories = c(&quot;旧文&quot;,&quot;WordPress博客&quot;)
  } 
  
  do.call(blogdown:::modify_yaml, header)
  
  # move post to new place
  path = paste0(&quot;content/post/&quot;, basename)
  dir.create(path)
  success = file.copy(from = file,
            to = paste(path, paste0(&quot;index.zh.&quot;, ext), sep = &quot;/&quot;))
  if(success){
    file.remove(file)
  }
})
</code></pre>

</div>
</main>

<section class="appendix">


<div>
  <div class="side side-left"><h3>作者简介</h3></div>
  <div>





<div>Chun-Hui Gao is a Research Associate at <a href="http://www.hzau.edu.cn">Huazhong Agricultural University</a>.</div>


</div>
</div>






<div>
  <div class="side side-left"><h3>重复使用</h3></div>
  Text and figures are licensed under <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution CC BY 4.0</a>. The source code is licensed under MIT. The full source is available at <a href="https://github.com/yihui/hugo-prose">https://github.com/yihui/hugo-prose</a>.
</div>



<div>
  <div class="side side-left"><h3>欢迎修订</h3></div>
  
  
  
    
    
  
  如果您发现本文里含有任何错误（包括错别字和标点符号），欢迎<a href="https://github.com/gaospecial/bio-spring/edit/master/content/post/2023-08-08-tidy-old-blog-post/index.zh.md" id="edit-link">在本站的 GitHub 项目里提交修订意见。</a>
</div>




<div>
  <div class="side side-left"><h3>引用本文</h3></div>
  <p>如果您使用了本文的内容，请按照以下方式引用：</p>
  <pre><code>gaoch (2023). 整理老文章. BIO-SPRING. bio-spring/post/2023/08/08/tidy-old-blog-post/</code></pre>
  <p>BibTeX citation</p>
  <pre><code>@misc{
  title = "整理老文章",
  author = "gaoch",
  year = "2023",
  journal = "BIO-SPRING",
  note = "bio-spring/post/2023/08/08/tidy-old-blog-post/"
}</code></pre>
</div>

</section>



<nav class="post-nav">
  <span class="nav-next">&larr; <a href="bio-spring/post/2021/05/08/ggvenndiagram-reborn/" title=下一篇&#32;(旧)>ggVennDiagram 的新生</a></span>
  &hercon;
  <span class="nav-prev"><a href="bio-spring/post/2023/08/20/modifying-blogdown-hugo-theme/" title=上一篇&#32;(新)>更改 blogdown 主题</a> &rarr;</span>
</nav>




<section class="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var disqus_js = '//bio-spring.disqus.com/embed.js';
    var d = document, s = d.createElement('script');
    s.src = disqus_js; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    var t = d.getElementById('disqus_thread');
    var b = false, l = function(scroll) {
      if (b) return;
      (d.head || d.body).appendChild(s); b = true;
      if (scroll) t.scrollIntoView();
    }
    s.onerror = function(e) {
      if (sessionStorage.getItem('failure-note')) return;
      t.innerText = 'Sorry, but you cannot make comments because Disqus failed to load for some reason. It is known to be blocked in China. If you are sure it is not blocked in your region, please refresh the page. 中国大陆地区读者需要翻墙才能发表评论。';
      t.style.border = '1px dashed';
      t.style.padding = '.5em';
      t.style.background = 'lightyellow';
      sessionStorage.setItem('failure-note', true);
    };
    
    if (location.hash.match(/^#comment-[0-9]+$/)) return l(true);
    var c = function() {
      if (b) return;
      var rect = t.getBoundingClientRect();
      if (rect.top < window.innerHeight && rect.bottom >= 0) l();
    };
    window.addEventListener('load', c);
    d.addEventListener('scroll', c);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>


</div>


  <footer>
  
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>



<script src="//yihui.org/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>



      <script async src="https://www.googletagmanager.com/gtag/js?id=G-77M8KZTCMR"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-77M8KZTCMR');
        }
      </script>


<script src="https://cdn.jsdelivr.net/combine/npm/@xiee/utils/js/number-sections.min.js,npm/@xiee/utils/js/toc.min.js,npm/@xiee/utils/js/toc-highlight.min.js,npm/@xiee/utils/js/sidenotes.min.js,npm/@xiee/utils/js/right-quote.min.js,npm/@xiee/utils/js/center-img.min.js,npm/@xiee/utils/js/fix-pandoc.min.js,npm/@xiee/utils/js/heading-anchor.min.js" defer></script>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xiee/utils/css/prism-xcode.min.css">
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" defer></script>


  <div class="footer">
  
  <ul class="copyright">
    <li>© <a href="https://bio-spring.top">Bio-Spring</a> 2006 &ndash; 2025 <a href="https://beian.miit.gov.cn">豫ICP备2021003240号</a></li>
  </ul>
  
  <ul>
    
    <li>
      <a href="/bio-spring/404.html">Contact</a>
    </li>
    
    <li class="optional">
      <a href="/bio-spring/categories/">Categories</a>
    </li>
    
    <li class="optional">
      <a href="/bio-spring/tags/">Tags</a>
    </li>
    
    <li id="menu-edit">
      <a href="#">Suggest an edit</a>
    </li>
    
    <li>
      <a href="#">Back to top</a>
    </li>
    
  </ul>
  </div>
  
  </footer>
  <script src="/bio-spring/js/features.js" defer></script>
  </body>
</html>

