<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title> Makefile 怎么写 | BIO-SPRING</title>
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xiee/utils@v1.13.54/css/article.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xiee/utils/css/heading-anchor.min.css">
    <link rel="stylesheet" href="/bio-spring/css/style.css" />
    <link rel="stylesheet" href="/bio-spring/css/fonts.css" />
    <link rel="stylesheet" href="/bio-spring/css/custom.css" />
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Makefile 怎么写">
  <meta name="twitter:description" content="示例 当一个目标需要执行多个命令时，可以在 Makefile 中为该目标提供多行命令。每一行命令都必须以制表符开始。以下是一个简单的示例：
all: clean build run clean: rm -f my_program build: gcc -Wall -o my_program main.c util.c run: ./my_program 在这个示例中：
all 是默认目标，它依赖于 clean、build 和 run。 clean 目标删除 my_program 可执行文件。 build 目标编译源文件生成可执行文件。 run 目标运行可执行文件。 你可以使用以下命令来执行默认目标 all：
make 或者直接指定目标：
make build 当你运行 make 命令时，它将按照依赖关系执行目标，确保每个目标都是最新的。在上面的示例中，all 依赖于 clean、build 和 run，因此这些目标将按照指定的顺序执行。
注意：在 Makefile 中，确保使用制表符而不是空格，因为 Make 工具对此有特殊的要求。
添加多个命令 如果你想在 clean 目标中添加多个 Shell 命令，可以将它们放在同一行，并使用分号 ; 将它们分隔。下面是一个示例：
clean: rm -f my_program; \ rm -f *.o; \ echo &#34;Cleanup complete&#34; 在这个例子中，clean 目标包含三个 Shell 命令。每个命令都以分号 ; 结尾，表示命令的结束。使用 \ 来表示命令在多行上续行。">


  </head>

  <body>

    <nav class="menu sticky-top">
    <ul>
      <li class="left">
        <a href="/"><span>BIO-SPRING</span></a>
      </li>
      
      <li>
        <a href="/bio-spring">Home</a>
      </li>
      
      <li>
        <a href="/bio-spring/post/">Blog Post</a>
      </li>
      
      <li>
        <a href="/bio-spring/publication/full-publication-list/">Publication</a>
      </li>
      
      <li>
        <a href="/bio-spring/work/">Work</a>
      </li>
      
      <li id="menu-search">
        <a href="/bio-spring/#">Search</a>
      </li>
      
    </ul>
    </nav>


<div class="container single">
<main>

<div class="article-meta">
<h1><span class="title">Makefile 怎么写</span></h1>

<h3 class="author">
gaoch
</h3>

<h3 class="date">2023-12-24</h3>
<p class="terms">
  
  
  Categories: <a href="/categories/%E5%85%B6%E5%AE%83">其它</a> <a href="/categories/%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF">信息技术</a> 
  
  
  
  Tags: <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">学习笔记</a> <a href="/tags/makefile">Makefile</a> <a href="/tags/shell">shell</a> 
  
  
</p>
</div>

<div class="article">
<h2 id="示例">示例</h2>
<p>当一个目标需要执行多个命令时，可以在 Makefile 中为该目标提供多行命令。每一行命令都必须以制表符开始。以下是一个简单的示例：</p>
<pre><code class="language-makefile">all: clean build run

clean:
    rm -f my_program

build:
    gcc -Wall -o my_program main.c util.c

run:
    ./my_program
</code></pre>
<p>在这个示例中：</p>
<ul>
<li><code>all</code> 是默认目标，它依赖于 <code>clean</code>、<code>build</code> 和 <code>run</code>。</li>
<li><code>clean</code> 目标删除 <code>my_program</code> 可执行文件。</li>
<li><code>build</code> 目标编译源文件生成可执行文件。</li>
<li><code>run</code> 目标运行可执行文件。</li>
</ul>
<p>你可以使用以下命令来执行默认目标 <code>all</code>：</p>
<pre><code class="language-bash">make
</code></pre>
<p>或者直接指定目标：</p>
<pre><code class="language-bash">make build
</code></pre>
<p>当你运行 <code>make</code> 命令时，它将按照依赖关系执行目标，确保每个目标都是最新的。在上面的示例中，<code>all</code> 依赖于 <code>clean</code>、<code>build</code> 和 <code>run</code>，因此这些目标将按照指定的顺序执行。</p>
<p><strong>注意</strong>：在 Makefile 中，确保使用制表符而不是空格，因为 Make 工具对此有特殊的要求。</p>
<h2 id="添加多个命令">添加多个命令</h2>
<p>如果你想在 <code>clean</code> 目标中添加多个 Shell 命令，可以将它们放在同一行，并使用分号 <code>;</code> 将它们分隔。下面是一个示例：</p>
<pre><code class="language-makefile">clean:
    rm -f my_program; \
    rm -f *.o; \
    echo &quot;Cleanup complete&quot;
</code></pre>
<p>在这个例子中，<code>clean</code> 目标包含三个 Shell 命令。每个命令都以分号 <code>;</code> 结尾，表示命令的结束。使用 <code>\</code> 来表示命令在多行上续行。</p>
<p>如果你希望多个命令按照顺序执行，但是希望其中一个失败时不会中断整个 Makefile 的执行，可以使用 <code>;</code> 将它们分隔开。如果你希望后续命令只在前面的命令成功时执行，可以使用 <code>&amp;&amp;</code> 连接命令，例如：</p>
<pre><code class="language-makefile">clean:
    rm -f my_program &amp;&amp; \
    rm -f *.o &amp;&amp; \
    echo &quot;Cleanup complete&quot;
</code></pre>
<p>这样，如果其中一个 <code>rm</code> 命令失败，后续的命令将不会执行。</p>
<h2 id="常见错误">常见错误</h2>
<p><code>makefile:8: *** missing separator.  Stop.</code></p>
<p>这个错误通常表示在 Makefile 中使用了不正确的缩进。在 Makefile 中，必须使用 Tab（制表符）来缩进命令，而不是空格。</p>

</div>
</main>

<section class="appendix">


<div>
  <div class="side side-left"><h3>作者简介</h3></div>
  <div>





<div>Chun-Hui Gao is a Research Associate at <a href="http://www.hzau.edu.cn">Huazhong Agricultural University</a>.</div>


</div>
</div>






<div>
  <div class="side side-left"><h3>重复使用</h3></div>
  Text and figures are licensed under <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution CC BY 4.0</a>. The source code is licensed under MIT. The full source is available at <a href="https://github.com/yihui/hugo-prose">https://github.com/yihui/hugo-prose</a>.
</div>



<div>
  <div class="side side-left"><h3>欢迎修订</h3></div>
  
  
  
    
    
  
  如果您发现本文里含有任何错误（包括错别字和标点符号），欢迎<a href="https://github.com/gaospecial/bio-spring/edit/master/content/post/2023-12-24-makefile-howto/index.zh.md" id="edit-link">在本站的 GitHub 项目里提交修订意见。</a>
</div>




<div>
  <div class="side side-left"><h3>引用本文</h3></div>
  <p>如果您使用了本文的内容，请按照以下方式引用：</p>
  <pre><code>gaoch (2023). Makefile 怎么写. BIO-SPRING. bio-spring/post/2023/12/24/makefile-howto/</code></pre>
  <p>BibTeX citation</p>
  <pre><code>@misc{
  title = "Makefile 怎么写",
  author = "gaoch",
  year = "2023",
  journal = "BIO-SPRING",
  note = "bio-spring/post/2023/12/24/makefile-howto/"
}</code></pre>
</div>

</section>



<nav class="post-nav">
  <span class="nav-next">&larr; <a href="bio-spring/post/2023/12/24/blogdown-site-to-gh-pages/" title=下一篇&#32;(旧)>部署网站到 gh-pages</a></span>
  &hercon;
  <span class="nav-prev"><a href="bio-spring/post/2023/12/29/mac-os-picgo/" title=上一篇&#32;(新)>Mac OS 安装 PicGo 提示“文件已损坏”</a> &rarr;</span>
</nav>




<section class="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var disqus_js = '//bio-spring.disqus.com/embed.js';
    var d = document, s = d.createElement('script');
    s.src = disqus_js; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    var t = d.getElementById('disqus_thread');
    var b = false, l = function(scroll) {
      if (b) return;
      (d.head || d.body).appendChild(s); b = true;
      if (scroll) t.scrollIntoView();
    }
    s.onerror = function(e) {
      if (sessionStorage.getItem('failure-note')) return;
      t.innerText = 'Sorry, but you cannot make comments because Disqus failed to load for some reason. It is known to be blocked in China. If you are sure it is not blocked in your region, please refresh the page. 中国大陆地区读者需要翻墙才能发表评论。';
      t.style.border = '1px dashed';
      t.style.padding = '.5em';
      t.style.background = 'lightyellow';
      sessionStorage.setItem('failure-note', true);
    };
    
    if (location.hash.match(/^#comment-[0-9]+$/)) return l(true);
    var c = function() {
      if (b) return;
      var rect = t.getBoundingClientRect();
      if (rect.top < window.innerHeight && rect.bottom >= 0) l();
    };
    window.addEventListener('load', c);
    d.addEventListener('scroll', c);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>


</div>


  <footer>
  
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>



<script src="//yihui.org/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>



      <script async src="https://www.googletagmanager.com/gtag/js?id=G-77M8KZTCMR"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-77M8KZTCMR');
        }
      </script>


<script src="https://cdn.jsdelivr.net/combine/npm/@xiee/utils/js/number-sections.min.js,npm/@xiee/utils/js/toc.min.js,npm/@xiee/utils/js/toc-highlight.min.js,npm/@xiee/utils/js/sidenotes.min.js,npm/@xiee/utils/js/right-quote.min.js,npm/@xiee/utils/js/center-img.min.js,npm/@xiee/utils/js/fix-pandoc.min.js,npm/@xiee/utils/js/heading-anchor.min.js" defer></script>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xiee/utils/css/prism-xcode.min.css">
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" defer></script>


  <div class="footer">
  
  <ul class="copyright">
    <li>© <a href="https://bio-spring.top">Bio-Spring</a> 2006 &ndash; 2025 <a href="https://beian.miit.gov.cn">豫ICP备2021003240号</a></li>
  </ul>
  
  <ul>
    
    <li>
      <a href="/bio-spring/404.html">Contact</a>
    </li>
    
    <li class="optional">
      <a href="/bio-spring/categories/">Categories</a>
    </li>
    
    <li class="optional">
      <a href="/bio-spring/tags/">Tags</a>
    </li>
    
    <li id="menu-edit">
      <a href="#">Suggest an edit</a>
    </li>
    
    <li>
      <a href="#">Back to top</a>
    </li>
    
  </ul>
  </div>
  
  </footer>
  <script src="/bio-spring/js/features.js" defer></script>
  </body>
</html>

