<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title> 在MATLAB中创建色彩绚丽的柱状图 | BIO-SPRING</title>
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xiee/utils@v1.13.54/css/article.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xiee/utils/css/heading-anchor.min.css">
    <link rel="stylesheet" href="/bio-spring/css/style.css" />
    <link rel="stylesheet" href="/bio-spring/css/fonts.css" />
    <link rel="stylesheet" href="/bio-spring/css/custom.css" />
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="在MATLAB中创建色彩绚丽的柱状图">
  <meta name="twitter:description" content="首先，看一下效果图。
默认条件下的柱状图
漂亮的柱状图
渐变着色的柱状图
代码如下：
[cc lang=”matlab”]
% 彩色柱状图
%% 用到的数据
n = 13;
Z = rand(n,1);
%% 默认图片
bar(Z);
%% 简单的作图
% 这个图根据数据列中值的大小着色。每列中的
% 值越大，颜色越突出
figure
h=bar(Z);
colormap(summer(n));
ch = get(h,’Children’);
fvd = get(ch,’Faces’);
fvcd = get(ch,’FaceVertexCData’);
[~, izs] = sortrows(Z,1);
for i = 1:n
row = izs(i);
fvcd(fvd(row,:)) = i;
end
set(ch,’FaceVertexCData’,fvcd)
%% 更加漂亮的图片
% 图片会以渐变的方式着色，效果非常不错
figure
h=bar(Z);
ch = get(h,’Children’);
fvd = get(ch,’Faces’);
fvcd = get(ch,’FaceVertexCData’);
[zs, izs] = sortrows(Z,1);
k = 128; % 准备生成128 *3 行的colormap
colormap(summer(k)); % 这样会产生一个128 * 3的矩阵，分别代表[R G B]的值
% 检视数据
whos ch fvd fvcd zs izs
%
% Name Size Bytes Class Attributes
%
% ch 1×1 8 double
% fvcd 66×1 528 double
% fvd 13×4 416 double
% izs 13×1 104 double
% zs 13×1 104 double
%
shading interp % Needed to graduate colors
for i = 1:n
color = floor(k*i/n); % 这里用取整函数获得color在colormap中行
row = izs(i); % Look up actual row # in data
fvcd(fvd(row,1)) = 1; % Color base vertices 1st index
fvcd(fvd(row,4)) = 1;
fvcd(fvd(row,2)) = color; % Assign top vertices color
fvcd(fvd(row,3)) = color;
end
set(ch,’FaceVertexCData’, fvcd); % Apply the vertex coloring
set(ch,’EdgeColor’,’k’)
[/cc]">


  </head>

  <body>

    <nav class="menu sticky-top">
    <ul>
      <li class="left">
        <a href="/"><span>BIO-SPRING</span></a>
      </li>
      
      <li>
        <a href="/bio-spring">Home</a>
      </li>
      
      <li>
        <a href="/bio-spring/post/">Blog Post</a>
      </li>
      
      <li>
        <a href="/bio-spring/publication/full-publication-list/">Publication</a>
      </li>
      
      <li>
        <a href="/bio-spring/work/">Work</a>
      </li>
      
      <li id="menu-search">
        <a href="/bio-spring/#">Search</a>
      </li>
      
    </ul>
    </nav>


<div class="container single">
<main>

<div class="article-meta">
<h1><span class="title">在MATLAB中创建色彩绚丽的柱状图</span></h1>

<h3 class="author">
gaoch
</h3>

<h3 class="date">2011-06-25</h3>
<p class="terms">
  
  
  Categories: <a href="/categories/%E5%85%B6%E5%AE%83">其它</a> <a href="/categories/%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF">信息技术</a> 
  
  
  
  Tags: <a href="/tags/%E6%97%A7%E6%96%87">旧文</a> <a href="/tags/wordpress">WordPress</a> <a href="/tags/matlab">MATLAB</a> <a href="/tags/%E4%BD%9C%E5%9B%BE">作图</a> 
  
  
</p>
</div>

<div class="article">
<p>首先，看一下效果图。</p>
<p>默认条件下的柱状图<br>
<img src="https://cloudfs-spring.oss-cn-qingdao.aliyuncs.com/bio_spring_uploads/2011/06/fig1.png" width="400" /><br>
漂亮的柱状图<br>
<img src="https://cloudfs-spring.oss-cn-qingdao.aliyuncs.com/bio_spring_uploads/2011/06/fig2.png" width="400" /><br>
渐变着色的柱状图<br>
<img src="https://cloudfs-spring.oss-cn-qingdao.aliyuncs.com/bio_spring_uploads/2011/06/fig3.png" width="400" /><br>
代码如下：</p>
<p>[cc lang=”matlab”]<br>
% 彩色柱状图<br>
%% 用到的数据<br>
n = 13;<br>
Z = rand(n,1);<br>
%% 默认图片<br>
bar(Z);<br>
%% 简单的作图<br>
% 这个图根据数据列中值的大小着色。每列中的<br>
% 值越大，颜色越突出<br>
figure<br>
h=bar(Z);<br>
colormap(summer(n));<br>
ch = get(h,’Children’);<br>
fvd = get(ch,’Faces’);<br>
fvcd = get(ch,’FaceVertexCData’);<br>
[~, izs] = sortrows(Z,1);<br>
for i = 1:n<br>
row = izs(i);<br>
fvcd(fvd(row,:)) = i;<br>
end<br>
set(ch,’FaceVertexCData’,fvcd)<br>
%% 更加漂亮的图片<br>
% 图片会以渐变的方式着色，效果非常不错<br>
figure<br>
h=bar(Z);<br>
ch = get(h,’Children’);<br>
fvd = get(ch,’Faces’);<br>
fvcd = get(ch,’FaceVertexCData’);<br>
[zs, izs] = sortrows(Z,1);<br>
k = 128; % 准备生成128 *3 行的colormap<br>
colormap(summer(k)); % 这样会产生一个128 * 3的矩阵，分别代表[R G
B]的值<br>
% 检视数据<br>
whos ch fvd fvcd zs izs<br>
%<br>
% Name Size Bytes Class Attributes<br>
%<br>
% ch 1×1 8 double<br>
% fvcd 66×1 528 double<br>
% fvd 13×4 416 double<br>
% izs 13×1 104 double<br>
% zs 13×1 104 double<br>
%<br>
shading interp % Needed to graduate colors<br>
for i = 1:n<br>
color = floor(k*i/n); % 这里用取整函数获得color在colormap中行<br>
row = izs(i); % Look up actual row # in data<br>
fvcd(fvd(row,1)) = 1; % Color base vertices 1st index<br>
fvcd(fvd(row,4)) = 1;<br>
fvcd(fvd(row,2)) = color; % Assign top vertices color<br>
fvcd(fvd(row,3)) = color;<br>
end<br>
set(ch,’FaceVertexCData’, fvcd); % Apply the vertex coloring<br>
set(ch,’EdgeColor’,’k’)<br>
[/cc]</p>

</div>
</main>

<section class="appendix">


<div>
  <div class="side side-left"><h3>作者简介</h3></div>
  <div>





<div>Chun-Hui Gao is a Research Associate at <a href="http://www.hzau.edu.cn">Huazhong Agricultural University</a>.</div>


</div>
</div>






<div>
  <div class="side side-left"><h3>重复使用</h3></div>
  Text and figures are licensed under <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution CC BY 4.0</a>. The source code is licensed under MIT. The full source is available at <a href="https://github.com/yihui/hugo-prose">https://github.com/yihui/hugo-prose</a>.
</div>



<div>
  <div class="side side-left"><h3>欢迎修订</h3></div>
  
  
  
    
    
  
  如果您发现本文里含有任何错误（包括错别字和标点符号），欢迎<a href="https://github.com/gaospecial/bio-spring/edit/master/content/post/2011-06-25-matlab-colourful-barplot/index.zh.md" id="edit-link">在本站的 GitHub 项目里提交修订意见。</a>
</div>




<div>
  <div class="side side-left"><h3>引用本文</h3></div>
  <p>如果您使用了本文的内容，请按照以下方式引用：</p>
  <pre><code>gaoch (2011). 在MATLAB中创建色彩绚丽的柱状图. BIO-SPRING. bio-spring/post/2011/06/25/2011-06-25-matlab-colourful-barplot/</code></pre>
  <p>BibTeX citation</p>
  <pre><code>@misc{
  title = "在MATLAB中创建色彩绚丽的柱状图",
  author = "gaoch",
  year = "2011",
  journal = "BIO-SPRING",
  note = "bio-spring/post/2011/06/25/2011-06-25-matlab-colourful-barplot/"
}</code></pre>
</div>

</section>



<nav class="post-nav">
  <span class="nav-next">&larr; <a href="bio-spring/post/2011/06/25/2011-06-25-linux-in-windows/" title=下一篇&#32;(旧)>在windows中获得Linux使用环境</a></span>
  &hercon;
  <span class="nav-prev"><a href="bio-spring/post/2011/06/28/2011-06-28-print_china_map/" title=上一篇&#32;(新)>使用Matlab画中国地图</a> &rarr;</span>
</nav>




<section class="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var disqus_js = '//bio-spring.disqus.com/embed.js';
    var d = document, s = d.createElement('script');
    s.src = disqus_js; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    var t = d.getElementById('disqus_thread');
    var b = false, l = function(scroll) {
      if (b) return;
      (d.head || d.body).appendChild(s); b = true;
      if (scroll) t.scrollIntoView();
    }
    s.onerror = function(e) {
      if (sessionStorage.getItem('failure-note')) return;
      t.innerText = 'Sorry, but you cannot make comments because Disqus failed to load for some reason. It is known to be blocked in China. If you are sure it is not blocked in your region, please refresh the page. 中国大陆地区读者需要翻墙才能发表评论。';
      t.style.border = '1px dashed';
      t.style.padding = '.5em';
      t.style.background = 'lightyellow';
      sessionStorage.setItem('failure-note', true);
    };
    
    if (location.hash.match(/^#comment-[0-9]+$/)) return l(true);
    var c = function() {
      if (b) return;
      var rect = t.getBoundingClientRect();
      if (rect.top < window.innerHeight && rect.bottom >= 0) l();
    };
    window.addEventListener('load', c);
    d.addEventListener('scroll', c);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>


</div>


  <footer>
  
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>





      <script async src="https://www.googletagmanager.com/gtag/js?id=G-77M8KZTCMR"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-77M8KZTCMR');
        }
      </script>


<script src="https://cdn.jsdelivr.net/combine/npm/@xiee/utils/js/number-sections.min.js,npm/@xiee/utils/js/toc.min.js,npm/@xiee/utils/js/toc-highlight.min.js,npm/@xiee/utils/js/sidenotes.min.js,npm/@xiee/utils/js/right-quote.min.js,npm/@xiee/utils/js/center-img.min.js,npm/@xiee/utils/js/fix-pandoc.min.js,npm/@xiee/utils/js/heading-anchor.min.js" defer></script>




  <div class="footer">
  
  <ul class="copyright">
    <li>© <a href="https://bio-spring.top">Bio-Spring</a> 2006 &ndash; 2025 <a href="https://beian.miit.gov.cn">豫ICP备2021003240号</a></li>
  </ul>
  
  <ul>
    
    <li>
      <a href="/bio-spring/404.html">Contact</a>
    </li>
    
    <li class="optional">
      <a href="/bio-spring/categories/">Categories</a>
    </li>
    
    <li class="optional">
      <a href="/bio-spring/tags/">Tags</a>
    </li>
    
    <li id="menu-edit">
      <a href="#">Suggest an edit</a>
    </li>
    
    <li>
      <a href="#">Back to top</a>
    </li>
    
  </ul>
  </div>
  
  </footer>
  <script src="/bio-spring/js/features.js" defer></script>
  </body>
</html>

