<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title> 整合 OSS 开放存储到 WordPress 系统 | BIO-SPRING</title>
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xiee/utils@v1.13.54/css/article.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xiee/utils/css/heading-anchor.min.css">
    <link rel="stylesheet" href="/bio-spring/css/style.css" />
    <link rel="stylesheet" href="/bio-spring/css/fonts.css" />
    <link rel="stylesheet" href="/bio-spring/css/custom.css" />
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="整合 OSS 开放存储到 WordPress 系统">
  <meta name="twitter:description" content="使用 OSS 存储 WordPress 相当于将 云服务器 的存储免费扩大了。
安装cloudfs -在云市场搜索cloudfs，获取下载链接。
-将下载的安装包上传至云服务器。
-安装依赖包。
-以默认设置安装。
[cc lang=”bash”]
# Install dependence
apt-get install libcurl4-openssl-dev libssl-dev pkg-config libxml2 libxml2-dev libfuse-dev libunwind8-dev
[/cc]
配置cloudfs [cc lang=”bash”]
vi /usr/local/cloudfs/conf/cloudfs.conf
[/cc]
需要配置的项目有： HOST 、ID 、KEY 、BUCKET 等 4 项必须；若干可选项。
测试 [cc lang=”bash”]
# Start cloudfs
service cloudfs start
service cloudfs status
# 目录和文件测试，在 OSS 控制台会看到相应变化
mkdir /mnt/oss/test
touch /mnt/oss/test/test.txt
[/cc]
迁移和设置媒体库 [cc lang=”bash”]
# 设置 WordPress 媒体库位置
cd /mnt/oss
mkdir wp_uploads
# 将原有媒体库内容迁移过来
cp -R /var/www/html/wp-content/uploads/* wp_uploads/
# 备份原有媒体库，同时腾出挂载点
mv /var/www/html/wp-content/uploads/ /var/www/html/wp-content/uploads_bak
# 挂载 OSS cloudfs 到 WordPress 媒体库
ln -s /mnt/oss/wp_uploads/ /var/www/html/wp-content/uploads
[/cc]">


  </head>

  <body>

    <nav class="menu sticky-top">
    <ul>
      <li class="left">
        <a href="/"><span>BIO-SPRING</span></a>
      </li>
      
      <li>
        <a href="/bio-spring">Home</a>
      </li>
      
      <li>
        <a href="/bio-spring/post/">Blog Post</a>
      </li>
      
      <li>
        <a href="/bio-spring/publication/full-publication-list/">Publication</a>
      </li>
      
      <li>
        <a href="/bio-spring/work/">Work</a>
      </li>
      
      <li id="menu-search">
        <a href="/bio-spring/#">Search</a>
      </li>
      
    </ul>
    </nav>


<div class="container single">
<main>

<div class="article-meta">
<h1><span class="title">整合 OSS 开放存储到 WordPress 系统</span></h1>

<h3 class="author">
gaoch
</h3>

<h3 class="date">2015-08-23</h3>
<p class="terms">
  
  
  Categories: <a href="/categories/%E5%85%B6%E5%AE%83">其它</a> <a href="/categories/%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF">信息技术</a> 
  
  
  
  Tags: <a href="/tags/%E6%97%A7%E6%96%87">旧文</a> <a href="/tags/wordpress">WordPress</a> <a href="/tags/oss">OSS</a> <a href="/tags/ubuntu">Ubuntu</a> <a href="/tags/%E6%8C%82%E8%BD%BD">挂载</a> <a href="/tags/%E9%98%BF%E9%87%8C%E4%BA%91">阿里云</a> 
  
  
</p>
</div>

<div class="article">
<p>使用 OSS 存储 WordPress 相当于将 云服务器 的存储免费扩大了。</p>
<h3 id="安装cloudfs">安装cloudfs</h3>
<p>-在云市场搜索cloudfs，获取下载链接。<br>
-将下载的安装包上传至云服务器。<br>
-安装依赖包。<br>
-以默认设置安装。</p>
<p>[cc lang=”bash”]<br>
# Install dependence<br>
apt-get install libcurl4-openssl-dev libssl-dev pkg-config libxml2
libxml2-dev libfuse-dev libunwind8-dev<br>
[/cc]</p>
<h3 id="配置cloudfs">配置cloudfs</h3>
<p>[cc lang=”bash”]<br>
vi /usr/local/cloudfs/conf/cloudfs.conf<br>
[/cc]</p>
<p>需要配置的项目有： HOST 、ID 、KEY 、BUCKET 等 4 项必须；若干可选项。</p>
<h3 id="测试">测试</h3>
<p>[cc lang=”bash”]<br>
# Start cloudfs<br>
service cloudfs start<br>
service cloudfs status<br>
# 目录和文件测试，在 OSS 控制台会看到相应变化<br>
mkdir /mnt/oss/test<br>
touch /mnt/oss/test/test.txt<br>
[/cc]</p>
<h3 id="迁移和设置媒体库">迁移和设置媒体库</h3>
<p>[cc lang=”bash”]<br>
# 设置 WordPress 媒体库位置<br>
cd /mnt/oss<br>
mkdir wp_uploads<br>
# 将原有媒体库内容迁移过来<br>
cp -R /var/www/html/wp-content/uploads/* wp_uploads/<br>
# 备份原有媒体库，同时腾出挂载点<br>
mv /var/www/html/wp-content/uploads/
/var/www/html/wp-content/uploads_bak<br>
# 挂载 OSS cloudfs 到 WordPress 媒体库<br>
ln -s /mnt/oss/wp_uploads/ /var/www/html/wp-content/uploads<br>
[/cc]</p>
<p><a href="https://cloudfs-spring.oss-cn-qingdao.aliyuncs.com/bio_spring_uploads/2015/08/wp-cloudfs.png"><img src="https://cloudfs-spring.oss-cn-qingdao.aliyuncs.com/bio_spring_uploads/2015/08/wp-cloudfs-300x103.png" class="alignnone size-medium wp-image-600" sizes="(max-width: 300px) 100vw, 300px" srcset="https://cloudfs-spring.oss-cn-qingdao.aliyuncs.com/bio_spring_uploads/2015/08/wp-cloudfs-300x103.png 300w, https://cloudfs-spring.oss-cn-qingdao.aliyuncs.com/bio_spring_uploads/2015/08/wp-cloudfs.png 867w" width="300" height="103" alt="wp-cloudfs" /></a></p>
<p>在 WordPress 媒体库上传一个新内容，检查是否可用。</p>
<p>参考资料：<br>
<a href="http://www.513624.com/archives/829.html">http://www.513624.com/archives/829.html</a><br>
<a href="http://bbs.aliyun.com/read/236273.html">http://bbs.aliyun.com/read/236273.html</a></p>

</div>
</main>

<section class="appendix">


<div>
  <div class="side side-left"><h3>作者简介</h3></div>
  <div>





<div>Chun-Hui Gao is a Research Associate at <a href="http://www.hzau.edu.cn">Huazhong Agricultural University</a>.</div>


</div>
</div>






<div>
  <div class="side side-left"><h3>重复使用</h3></div>
  Text and figures are licensed under <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution CC BY 4.0</a>. The source code is licensed under MIT. The full source is available at <a href="https://github.com/yihui/hugo-prose">https://github.com/yihui/hugo-prose</a>.
</div>



<div>
  <div class="side side-left"><h3>欢迎修订</h3></div>
  
  
  
    
    
  
  如果您发现本文里含有任何错误（包括错别字和标点符号），欢迎<a href="https://github.com/gaospecial/bio-spring/edit/master/content/post/2015-08-23-cloudfs-wp-uploads/index.zh.md" id="edit-link">在本站的 GitHub 项目里提交修订意见。</a>
</div>




<div>
  <div class="side side-left"><h3>引用本文</h3></div>
  <p>如果您使用了本文的内容，请按照以下方式引用：</p>
  <pre><code>gaoch (2015). 整合 OSS 开放存储到 WordPress 系统. BIO-SPRING. bio-spring/post/2015/08/23/2015-08-23-cloudfs-wp-uploads/</code></pre>
  <p>BibTeX citation</p>
  <pre><code>@misc{
  title = "整合 OSS 开放存储到 WordPress 系统",
  author = "gaoch",
  year = "2015",
  journal = "BIO-SPRING",
  note = "bio-spring/post/2015/08/23/2015-08-23-cloudfs-wp-uploads/"
}</code></pre>
</div>

</section>



<nav class="post-nav">
  <span class="nav-next">&larr; <a href="bio-spring/post/2015/08/21/2015-08-21-ubuntu-install-lamp/" title=下一篇&#32;(旧)>Ubuntu 快速安装 LAMP</a></span>
  &hercon;
  <span class="nav-prev"><a href="bio-spring/post/2015/09/06/2015-09-06-fujifilm-f60fd/" title=上一篇&#32;(新)>富士卡片机F60fd拆机图片</a> &rarr;</span>
</nav>




<section class="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var disqus_js = '//bio-spring.disqus.com/embed.js';
    var d = document, s = d.createElement('script');
    s.src = disqus_js; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    var t = d.getElementById('disqus_thread');
    var b = false, l = function(scroll) {
      if (b) return;
      (d.head || d.body).appendChild(s); b = true;
      if (scroll) t.scrollIntoView();
    }
    s.onerror = function(e) {
      if (sessionStorage.getItem('failure-note')) return;
      t.innerText = 'Sorry, but you cannot make comments because Disqus failed to load for some reason. It is known to be blocked in China. If you are sure it is not blocked in your region, please refresh the page. 中国大陆地区读者需要翻墙才能发表评论。';
      t.style.border = '1px dashed';
      t.style.padding = '.5em';
      t.style.background = 'lightyellow';
      sessionStorage.setItem('failure-note', true);
    };
    
    if (location.hash.match(/^#comment-[0-9]+$/)) return l(true);
    var c = function() {
      if (b) return;
      var rect = t.getBoundingClientRect();
      if (rect.top < window.innerHeight && rect.bottom >= 0) l();
    };
    window.addEventListener('load', c);
    d.addEventListener('scroll', c);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>


</div>


  <footer>
  
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>





      <script async src="https://www.googletagmanager.com/gtag/js?id=G-77M8KZTCMR"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-77M8KZTCMR');
        }
      </script>


<script src="https://cdn.jsdelivr.net/combine/npm/@xiee/utils/js/number-sections.min.js,npm/@xiee/utils/js/toc.min.js,npm/@xiee/utils/js/toc-highlight.min.js,npm/@xiee/utils/js/sidenotes.min.js,npm/@xiee/utils/js/right-quote.min.js,npm/@xiee/utils/js/center-img.min.js,npm/@xiee/utils/js/fix-pandoc.min.js,npm/@xiee/utils/js/heading-anchor.min.js" defer></script>




  <div class="footer">
  
  <ul class="copyright">
    <li>© <a href="https://bio-spring.top">Bio-Spring</a> 2006 &ndash; 2025 <a href="https://beian.miit.gov.cn">豫ICP备2021003240号</a></li>
  </ul>
  
  <ul>
    
    <li>
      <a href="/bio-spring/404.html">Contact</a>
    </li>
    
    <li class="optional">
      <a href="/bio-spring/categories/">Categories</a>
    </li>
    
    <li class="optional">
      <a href="/bio-spring/tags/">Tags</a>
    </li>
    
    <li id="menu-edit">
      <a href="#">Suggest an edit</a>
    </li>
    
    <li>
      <a href="#">Back to top</a>
    </li>
    
  </ul>
  </div>
  
  </footer>
  <script src="/bio-spring/js/features.js" defer></script>
  </body>
</html>

