{{ partial "header.html" . }}

<div class="container list">
<main>
{{ if not .IsHome }}
<h1>{{ .Title }}</h1>
{{ end }}

{{ with .Content }}
<section class="article-list">
<div>{{ . }}</div>
</section>
{{ end }}

{{ if .IsHome }}
{{ range $i, $p := (where .Site.RegularPages "Section" "card") }}
<section class="article-list"{{ with .Params.style }}{{ printf " style=%q" . | safeHTMLAttr }}{{ end }}>
  <table>
    <tbody>
      <tr>
      <td class="side-title"><h1>{{ $p.Title }}</h1></td>
      <td class="spacer spacer-left"></td>
      <td>{{ $p.Content }}</td>
      </tr>
    </tbody>
  </table>
</section>
{{ end }}
{{ end }}

{{ $pages := .Pages }}
{{ if .IsHome }}
{{ $pages = first (default 6 .Site.Params.homePosts) (sort (where .Site.RegularPages "Type" "in" .Site.Params.mainSections) "Date" "desc") }}
{{ else }}
{{ $pages = (.Paginate $pages).Pages }}
{{ end }}

{{ range $pages }}
<section class="article-list post-card{{ if .Draft }} draft{{ end }}">
  <table>
    <tbody>
    <tr>
    <td>{{ if .Date }}<span>{{ .Date.Format "2006-01-02" }}</span>{{ end }}</td>
    <td>{{ with .Params.author }}<span>{{ . }}</span>{{ end }}</td>
    <td><h1><a href="{{ .RelPermalink }}">{{ .Title }}</a></h1></td>
    </tr>
    </tbody>
  </table>
</section>
{{ end }}

{{ if not .IsHome }}
{{ template "_internal/pagination.html" . }}
{{ end }}

{{ partial "disqus.html" . }}
</main>
</div>

{{ partial "footer.html" . }}
