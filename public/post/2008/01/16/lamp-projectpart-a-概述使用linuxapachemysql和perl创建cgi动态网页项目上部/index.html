<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title> LAMP Project[part A]-概述:使用Linux,apache,mySQL和Perl创建cgi动态网页项目[上部] | Hugo Prose</title>
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/npm/@xiee/utils/css/article.min.css,npm/@xiee/utils/css/heading-anchor.min.css">
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/custom.css" />
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="LAMP Project[part A]-概述:使用Linux,apache,mySQL和Perl创建cgi动态网页项目[上部]"/>
<meta name="twitter:description" content="最近几天, 尝试创建了一个基于LAMP的cgi项目,说是项目,其实只是一个小玩具,不过麻雀虽小,五脏俱全,本人由此得到了不少的体会.
本着相互交流,相互促进的原则(communicate可是我博客的主题呢!),我把具体过程给予一定的整理,由此发布出来,相当于固化学习成果了.
版权声明:本文为原创,转载请遵循&quot;保持署名一致,非商业使用&quot;原则.
**
概述:**
LAMP是一套开源的强大工具, 本次通过创建网页查询,从数据库中查询出相应记录并在网页上展示出来.
涉及以下部分,近期将依次发布,敬请留意:
LAMP的安装和设置;
mySQL数据库的创建及数据导入；
使用CGI创建动态网页,对查询数据进行处理,返回查询结果.
LAMP的安装和设置 本人使用的linux发行版是Ubuntu Feisty(7.04),在这个版本中可以一键完成整个系统的安装.整个过程在ubuntu forum中有详述,在此不在赘述.
#在Apache服务器中进行cgi的设置.
在site-enabled的配置文件中,需要添加你的cgi脚本目录并给予相应的说明.
[code]
ScriptAlias /mycgi/ /var/www/cgi/
&lt;Directory &ldquo;/var/www/cgi/&quot;&gt;
AllowOverride None
Options ExecCGI -MultiViews &#43;SymLinksIfOwnerMatch
Order allow,deny
Allow from all
&lt;/Directory&gt;
[/code]
首先定义一下alias,这样在服务器上输入mycgi则会在/var/www/cgi/目录执行.
很简单.需要注意的就是相应目录的权限,要给所有人以执行的权利(755) 设置完成之后,注意重启apache服务器,
sudo /etc/init.d/apache2 restart
创建mySQL数据库,并导入数据 #数据的结构
我们要导入的是一个科技论文影响因子的列表,如下显示了它的结构:
每一行是一个记录,共有四栏column,栏间以&rdquo;,&ldquo;相隔,分别是缩写的标题,06,05,04年的impact factor;
#创建数据库和导入上面的数据
注:shell&gt;表示在命令行下输入的命令; mySQL&gt;表示输入的sql命令；
shell&gt;mysql -uroot -p
*****(root的密码)
mysql&gt;create database test;
mysql&gt;create table ifactor(
myid int(6),
title varchar(30) not null,
if04 float,
if05 float,"/>


  </head>

  <body>

    <nav class="menu">
    <ul>
      <li class="left">
        <a href="/"><span>Hugo Prose</span></a>
      </li>
      
      <li>
        <a href="/">Home</a>
      </li>
      
      <li>
        <a href="/about/">About</a>
      </li>
      
      <li>
        <a href="/sitemap/">Sitemap</a>
      </li>
      
      <li id="menu-search">
        <a href="/#">Search</a>
      </li>
      
      <li>
        <a href="/index.xml">Subscribe</a>
      </li>
      
    </ul>
    </nav>


<div class="container single">
<main>

<div class="article-meta">
<h1><span class="title">LAMP Project[part A]-概述:使用Linux,apache,mySQL和Perl创建cgi动态网页项目[上部]</span></h1>

<h3 class="author">
gaoch
</h3>

<h3 class="date">2008-01-16</h3>
<p class="terms">
  
  
  
  
  Tags: <a href="/tags/%E7%99%BE%E5%BA%A6%E7%A9%BA%E9%97%B4">百度空间</a> 
  
  
</p>
</div>

<div class="article">
<p>最近几天,
尝试创建了一个基于LAMP的cgi项目,说是项目,其实只是一个小玩具,不过麻雀虽小,五脏俱全,本人由此得到了不少的体会.<br>
本着相互交流,相互促进的原则(communicate可是我博客的主题呢!),我把具体过程给予一定的整理,由此发布出来,相当于固化学习成果了.</p>
<p>版权声明:本文为原创,转载请遵循&quot;保持署名一致,非商业使用&quot;原则.<br>
**<br>
概述:**<br>
LAMP是一套开源的强大工具,
本次通过创建网页查询,从数据库中查询出相应记录并在网页上展示出来.<br>
涉及以下部分,近期将依次发布,敬请留意:<br>
    LAMP的安装和设置;<br>
    mySQL数据库的创建及数据导入；<br>
    使用CGI创建动态网页,对查询数据进行处理,返回查询结果.</p>
<h2 id="lamp的安装和设置">LAMP的安装和设置</h2>
<p>本人使用的linux发行版是Ubuntu
Feisty(7.04),在这个版本中可以一键完成整个系统的安装.整个过程在ubuntu
forum中有详述,在此不在赘述.<br>
#在Apache服务器中进行cgi的设置.<br>
在site-enabled的配置文件中,需要添加你的cgi脚本目录并给予相应的说明.</p>
<p>[code]<br>
        ScriptAlias /mycgi/ /var/www/cgi/<br>
    &lt;Directory &ldquo;/var/www/cgi/&quot;&gt;<br>
        AllowOverride None<br>
        Options ExecCGI -MultiViews +SymLinksIfOwnerMatch<br>
        Order allow,deny<br>
        Allow from all<br>
    &lt;/Directory&gt;<br>
[/code]</p>
<p>首先定义一下alias,这样在服务器上输入mycgi则会在/var/www/cgi/目录执行.<br>
很简单.需要注意的就是相应目录的权限,要给所有人以执行的权利(755)
设置完成之后,注意重启apache服务器,</p>
<p>sudo /etc/init.d/apache2 restart</p>
<h2 id="创建mysql数据库并导入数据">创建mySQL数据库,并导入数据</h2>
<p><strong>#数据的结构</strong><br>
我们要导入的是一个科技论文影响因子的列表,如下显示了它的结构:<br>
<a href="http://hiphotos.baidu.com/spring%5Fgao/pic/item/e8e74010dea102f2c2ce794a.jpg"><img src="http://hiphotos.baidu.com/spring%5Fgao/pic/item/cf97b5fb95cfa72c4e4aea31.jpg" class="blogimg" /></a><br>
每一行是一个记录,共有四栏column,栏间以&rdquo;,&ldquo;相隔,分别是缩写的标题,06,05,04年的impact
factor;</p>
<p><strong>#创建数据库和导入上面的数据</strong></p>
<p>注:shell&gt;表示在命令行下输入的命令; mySQL&gt;表示输入的sql命令；<br>
shell&gt;mysql -uroot -p<br>
*****(root的密码)<br>
mysql&gt;create database test;<br>
mysql&gt;create table ifactor(<br>
    myid int(6),<br>
    title varchar(30) not null,<br>
    if04 float,<br>
    if05 float,<br>
    if06 float<br>
);<br>
mysql&gt;alter table ifactor add primary key(&lsquo;myid&rsquo;);<br>
mysql&gt;alter table ifactor change myid int(6) auto_increment;<br>
<em>数据库的结构如下:</em><br>
<img src="http://hiphotos.baidu.com/spring%5Fgao/pic/item/23549c506b381f6c84352411.jpg" class="blogimg" /><br>
mysql&gt;load data local infile
&lsquo;数据文件的绝对路径,eg,/home/test/Desktop/if.txt&rsquo;<br>
    into table ifactor(title,if06,if05,if04);<br>
mysql&gt;select * from ifactor limit 0,5;<br>
<img src="http://hiphotos.baidu.com/spring%5Fgao/pic/item/8fa231d32ce87c0e3bf3cf29.jpg" class="blogimg" />至此,数据库建立完成.</p>
<p><strong>#mysql查询,模式匹配简介</strong></p>
<p>在mysql中可以使用两个命令进行模式匹配.一个是LIKE,一个是RLIKE(REGEXP)；<br>
前者使用&rdquo;_&ldquo;代替一个字符,&rdquo;%&ldquo;代替多个字符,RLIKE则使用扩展的正则表达式进行匹配.<br>
如上第一条记录,可以写成:<br>
mysql&gt;select * from ifactor where title like &lsquo;aap%bu%&rsquo;;
[后面必须有%,因为还有字符]<br>
mysql&gt;select * from ifactor where title rlike &lsquo;aap.*bu&rsquo;;<br>
后面将要使用这个东西.</p>
<h2 id="使用dbicgi">使用DBI,CGI</h2>
<p>dbi和cgi是perl的模块, 因此使用dbi,cgi要对perl有所了解.<br>
<strong>#建立cgi中使用的mysql账户(为了安全的考虑)</strong><br>
mysql&gt;grant select on test.ifactor to test@localhost identified by
&rsquo;testpasswd&rsquo;;</p>
<p>下面的代码只是其中的一部分,请确保你的代码前面几行是这个东西:<br>
[code]<br>
#!/usr/bin/perl -w<br>
use DBI;<br>
use use CGI &lsquo;:standard&rsquo;;<br>
use strict;<br>
[/code]</p>
<p><strong>#创建DBI,mysql数据库连接</strong></p>
<p>my $dbh = DBI-&gt;connect(&lsquo;DBI:mysql:people&rsquo;, &lsquo;apache&rsquo;, &rsquo;lampiscool&rsquo;)<br>
        or die &ldquo;Can&rsquo;t connect: &quot; . DBI-&gt;errstr();<br>
<strong>#进行数据库查询</strong></p>
<p>    my $sth = $dbh-&gt;prepare(&lsquo;SELECT title,if04,if05,if06 FROM
ifactor<br>
                       WHERE title RLIKE ? &lsquo;)<br>
           or handle_error(&ldquo;Can&rsquo;t prepare SQL: &quot; . $dbh-&gt;errstr(),
$dbh);</p>
<p>    $sth-&gt;execute($query)<br>
           or handle_error(&ldquo;Can&rsquo;t execute SQL: &quot; . $dbh-&gt;errstr(),<br>
                            $dbh, $sth);</p>
<p><strong>#对查询结果进行处理</strong></p>
<p>    my($title,$if04,$if05,$if06);<br>
    while (($title,$if04,$if05,$if06) = $sth-&gt;fetchrow()) {<br>
      print
&ldquo;&lt;tr&gt;&lt;th&gt;$title&lt;/th&gt;&lt;th&gt;$if04&lt;/th&gt;&lt;th&gt;$if05&lt;/th&gt;&lt;th&gt;$if06&lt;/th&gt;&lt;/tr&gt;\n&rdquo;;<br>
    }</p>

</div>
</main>

<section class="appendix">


<div>
  <div class="side side-left"><h3>Author&#39;s bio</h3></div>
  <div>






</div>
</div>






<div>
  <div class="side side-left"><h3>Reuse</h3></div>
  Text and figures are licensed under <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution CC BY 4.0</a>. The source code is licensed under MIT. The full source is available at <a href="https://github.com/yihui/hugo-prose">https://github.com/yihui/hugo-prose</a>.
</div>



<div>
  <div class="side side-left"><h3>Suggest changes</h3></div>
  
  
  
    
    
  
  If you find any mistakes (including typos) or want to suggest changes, please feel free to <a href="https://github.com/yihui/hugo-prose/edit/master/exampleSite/content/post/2008-01-16-lamp-configuration.md" id="edit-link">edit the source file of this page on Github and create a pull request.</a>
</div>




<div>
  <div class="side side-left"><h3>Citation</h3></div>
  <p>For attribution, please cite this work as</p>
  <pre><code>gaoch (2008). LAMP Project[part A]-概述:使用Linux,apache,mySQL和Perl创建cgi动态网页项目[上部]. Hugo Prose. /post/2008/01/16/lamp-projectpart-a-%E6%A6%82%E8%BF%B0%E4%BD%BF%E7%94%A8linuxapachemysql%E5%92%8Cperl%E5%88%9B%E5%BB%BAcgi%E5%8A%A8%E6%80%81%E7%BD%91%E9%A1%B5%E9%A1%B9%E7%9B%AE%E4%B8%8A%E9%83%A8/</code></pre>
  <p>BibTeX citation</p>
  <pre><code>@misc{
  title = "LAMP Project[part A]-概述:使用Linux,apache,mySQL和Perl创建cgi动态网页项目[上部]",
  author = "gaoch",
  year = "2008",
  journal = "Hugo Prose",
  note = "/post/2008/01/16/lamp-projectpart-a-%E6%A6%82%E8%BF%B0%E4%BD%BF%E7%94%A8linuxapachemysql%E5%92%8Cperl%E5%88%9B%E5%BB%BAcgi%E5%8A%A8%E6%80%81%E7%BD%91%E9%A1%B5%E9%A1%B9%E7%9B%AE%E4%B8%8A%E9%83%A8/"
}</code></pre>
</div>

</section>



<nav class="post-nav">
  <span class="nav-next">&larr; <a href="/post/2008/01/13/%E9%9B%AA-@-%E6%AD%A6%E6%B1%89/" title=Next&#32;post&#32;(older)>***雪*** @ 武汉</a></span>
  &hercon;
  <span class="nav-prev"><a href="/post/2008/01/18/lamp-projectpart-final-%E5%B1%95%E7%A4%BA%E6%95%88%E6%9E%9C%E5%9B%BE/" title=Previous&#32;post&#32;(newer)>LAMP Project[part Final]-展示效果图</a> &rarr;</span>
</nav>





</div>


  <footer>
  


<script src="//yihui.org/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>





<script src="https://cdn.jsdelivr.net/combine/npm/@xiee/utils/js/number-sections.min.js,npm/@xiee/utils/js/toc.min.js,npm/@xiee/utils/js/sidenotes.min.js,npm/@xiee/utils/js/right-quote.min.js,npm/@xiee/utils/js/center-img.min.js,npm/@xiee/utils/js/fix-pandoc.min.js,npm/@xiee/utils/js/heading-anchor.min.js" defer></script>




  <div class="footer">
  
  <ul class="copyright">
    <li>© <a href="https://en.wikipedia.org/wiki/Seneca_the_Younger">Lucius Annaeus Seneca</a> 4 BC &ndash; AD 65</li>
  </ul>
  
  <ul>
    
    <li>
      <a href="/404.html">Contact</a>
    </li>
    
    <li class="optional">
      <a href="/categories/">Categories</a>
    </li>
    
    <li class="optional">
      <a href="/tags/">Tags</a>
    </li>
    
    <li id="menu-edit">
      <a href="#">Suggest an edit</a>
    </li>
    
    <li>
      <a href="#">Back to top</a>
    </li>
    
  </ul>
  </div>
  
  </footer>
  <script src="/js/features.js" defer></script>
  </body>
</html>

